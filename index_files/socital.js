!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=187)}([,,,,,,,,,function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!r.i(i.a)(n))throw TypeError("Stringified UUID is invalid");return n}for(var i=r(10),o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));t.a=n},function(e,t,r){"use strict";function n(e){return"string"==typeof e&&i.a.test(e)}var i=r(35);t.a=n},function(e,t,r){"use strict";e.exports=r(31)().fetch},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e||(console.assert?console.trace?console.log("Assertion Failed: "+t):console.trace("Assertion Failed: "+t):console.assert(e,t))}function o(e){if(e){var t=Array.prototype.slice.call(e).filter(function(e){return e.src.includes("socital.com/static/v1/socital.js")});return t[0]&&t[0].src?t[0].src:null}return null}function a(e,t){return document.getElementById(e)&&document.getElementById(e).getAttribute(t)?document.getElementById(e).getAttribute(t):null}function s(e,t){var r=RegExp("[?&]"+t+"=([^&]*)").exec(e);return r&&decodeURIComponent(r[1].replace(/\+/g," "))}function l(e){var t=document.createElement("FORM");t.method="GET",t.id="soc_redirect_form",t.action=e,document.getElementsByTagName("body")[0].appendChild(t),-1===t.action.indexOf("?")?document.getElementById("soc_redirect_form").submit():(t.action.slice(t.action.indexOf("?")+1).split("&").forEach(function(e){e=e.split("=");var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",decodeURIComponent(e[0])),r.setAttribute("value",decodeURIComponent(e[1])),t.appendChild(r)}),document.getElementById("soc_redirect_form").submit())}function u(){var e=I.default.get({name:"SocitalTrackingBrowserID"});if(!e||""===e){e=(0,T.v4)();var t=new Date(2038,1,1).getTime(),r=(new Date).getTime(),n=Math.round(Math.abs((t-r)/864e5));I.default.set({name:"SocitalTrackingBrowserID",value:e,expiresInDays:n})}return e}function c(){var e=o(document.querySelectorAll("script")),t=s(e,"userID");return a("socital-script","data-socital-user-id")?a("socital-script","data-socital-user-id"):t}function d(){var e="",t=document.getElementById("socital-script");return e=null==t?o(document.querySelectorAll("script")):t.getAttribute("src"),e.split("?")[0].match(/^(?:https?:\/\/)?(?:[^@/\n]+@)?(?:www\.)?([^:/\n]+)(?:(:\d*)?)/g)[0]}function f(){var e=a("socital-script","data-socital-log-level")?a("socital-script","data-socital-log-level"):"warn";return["info","debug","error","trace","warn"].includes(e)?e:"warn"}function h(e){var t=e.logger,r=e.domain;I.default.isLocalStorageAvailable()?localStorage.setItem("soc_domain",r):t.warn("Local Storage not available, domain not set.")}function p(e){var t=e.logger,r=e.preference;return e.enabled?new x.default({logger:t,preference:r}):null}function g(e){var t=e.whitelisted,r=e.logger,n=e.userID;!1===t&&r.warn("User "+n+" tried loading the script from a non trusted domain. Please add your allowed domains under your Account Settings.")}function v(e){var t={plugin:null,env:{},logWebHookURL:e.logWebHookURL,logLevel:e.logLevel,browserID:e.browserID,clientID:e.clientID,viewMode:e.viewMode||!1,baseURL:e.baseURL};try{t.plugin=JSON.parse(decodeURIComponent(e.plugin))}catch(t){t.message="Could not parse campaign data. "+JSON.stringify(e.plugin)+". "+t.message,console.error(t)}if(!t.viewMode)try{t.env=JSON.parse(decodeURIComponent(e.envData))}catch(t){t.message="Could not parse env data. "+JSON.stringify(e.envData)+". "+t.message,console.error(t)}return t}function y(){return!!a("socital-script","data-socital-disable-tracking")&&"true"===a("socital-script","data-socital-disable-tracking")}function m(){return"true"===a("socital-script","data-socital-dev")}function b(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)}function w(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)}function _(e,t){if("object"===(void 0===e?"undefined":D(e))&&null!=e&&"object"===(void 0===t?"undefined":D(t))&&null!=t){var r=[0,0];for(var n in e)r[0]++;for(var i in t)r[1]++;if(r[0]-r[1]!=0)return!1;for(var o in e)if(!(o in t&&_(e[o],t[o])))return!1;for(var a in t)if(!(a in e&&_(t[a],e[a])))return!1;return!0}return e===t}function O(e,t,r){document.querySelector("body").addEventListener(t,function(t){for(var n=t.target;null!=n;){if(n.matches(e))return void r(t);n=n.parentElement}},!0)}Object.defineProperty(t,"__esModule",{value:!0});var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.assert=i,t.getSocitalScriptURL=o,t.getAttributeFromScriptTag=a,t.getParameterByName=s,t.redirect=l,t.getBrowserID=u,t.retrieveUserID=c,t.baseURL=d,t.getLogLevel=f,t.setDomainInLocalStorage=h,t.googleAnalytics=p,t.checkWhitelisted=g,t.resolvePluginData=v,t.getDisableTracking=y,t.getIsDevelopment=m,t.bindEvent=b,t.unbindEvent=w,t.isEqual=_,t.addCustomEventListener=O;var k=r(13),I=n(k),T=r(32),S=r(23),x=n(S);t.default={assert:i,getSocitalScriptURL:o,getAttributeFromScriptTag:a,bindEvent:b,unbindEvent:w,redirect:l,getBrowserID:u,retrieveUserID:c,baseURL:d,getLogLevel:f,setDomainInLocalStorage:h,googleAnalytics:p,checkWhitelisted:g,resolvePluginData:v,getDisableTracking:y,getIsDevelopment:m,isEqual:_,addCustomEventListener:O}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(){n(this,e)}return a(e,null,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value,n=e.expiresInDays,i=null;if(void 0!==(void 0===n?"undefined":o(n))){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),i=a.toUTCString()}window.localStorage.setItem(t,JSON.stringify({value:""+r,expires:i}))}},{key:"get",value:function(t){var r=t.name,n=window.localStorage.getItem(r);if(!n)return"";try{var i=JSON.parse(n),o=i.value,a=i.expires;return a&&Date.parse(a)<Date.now()?(e.remove({name:r}),""):o||""}catch(e){return""}}},{key:"getAll",value:function(){return Object.keys(window.localStorage).map(function(t){return{name:t,value:e.get({name:t})}})}},{key:"match",value:function(t){var r=t.regex,n=e.getAll(),i=n.find(function(e){return e.name.match(r)});return i?i.value:""}},{key:"matchAll",value:function(t){var r=t.regex,n=e.getAll(),i=n.filter(function(e){return e.name.match(r)});return i.length<=0?"":i}},{key:"remove",value:function(e){var t=e.name;window.localStorage.removeItem(t)}},{key:"migrateCookies",value:function(){var t={SocitalConverted:36500,SocitalLoggedIn:36500,SocitalTrackingBrowserID:36500,socitalPlugin:7,SocitalPending:7,SocitalBar:1,SocitalPagesVisited:.02},r=0;try{var n=localStorage.getItem("soc_domain"),o=document.cookie.split(";"),a=o.filter(function(e){return(""+e.split("=")[0]).toUpperCase().includes("SOCITAL")});a=a.map(function(e){return e.trim()}),a.forEach(function(o){var a=o.split("="),s=i(a,2),l=s[0],u=s[1];document.cookie=l+"="+u+";expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain="+n+";",document.cookie=l+"="+u+";expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=l+"="+u+";expires=Thu, 01 Jan 1970 00:00:00 GMT";var c=Object.keys(t).find(function(e){return l.includes(e)});c&&(r=t[c]),"socital"===l&&(r=36500),e.set({name:l,value:u,expiresInDays:r})})}catch(e){console.log("Error while migrating cookies",e)}}},{key:"isLocalStorageAvailable",value:function(){try{if(window&&window.localStorage&&(window.localStorage.setItem("isLocalStorageAvailableTest","yes"),"yes"===window.localStorage.getItem("isLocalStorageAvailableTest")))return window.localStorage.removeItem("isLocalStorageAvailableTest"),!0}catch(e){}return!1}}]),e}();t.default=s},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e){if(!r.i(i.a)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}var i=r(10);t.a=n},function(e,t,r){"use strict";function n(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}t.a=n;var i,o=new Uint8Array(16)},function(e,t,r){"use strict";function n(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var i=r(9),o=r(15);t.a=function(e,t,a){function s(e,s,l,u){if("string"==typeof e&&(e=n(e)),"string"==typeof s&&(s=r.i(o.a)(s)),16!==s.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(s),c.set(e,s.length),c=a(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,l){u=u||0;for(var d=0;d<16;++d)l[u+d]=c[d];return l}return r.i(i.a)(c)}try{s.name=e}catch(e){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value,n=e.expiresInDays,i="";if(void 0!==n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i="expires="+o.toUTCString()+";"}var a=this.isLocalStorageAvailable()?window.localStorage.getItem("soc_domain"):null;document.cookie=a?t+"="+r+";"+i+"path=/;domain="+a:t+"="+r+";"+i+"path=/"}},{key:"get",value:function(e){var t=e.name;t+="=";var r=document.cookie.split(/; */),n=r.find(function(e){return e.startsWith(t)});return n?n.substring(t.length,n.length):""}},{key:"match",value:function(e){var t=e.regex,r=document.cookie.split(/; */),n=r.find(function(e){return e.split("=")[0].match(t)});return n?n.split("=")[1]:""}},{key:"matchAll",value:function(e){var t=e.regex;if(void 0!==document.cookie){var r=document.cookie.split(/; */),n=r.filter(function(e){return e.split("=")[0].match(t)});return n.length>0?n=n.map(function(e){return{name:e.split("=")[0],value:e.split("=")[1]}}):""}return""}},{key:"isLocalStorageAvailable",value:function(){try{if(window&&window.localStorage&&(window.localStorage.setItem("isLocalStorageAvailableTest","yes"),"yes"===window.localStorage.getItem("isLocalStorageAvailableTest")))return window.localStorage.removeItem("isLocalStorageAvailableTest"),!0}catch(e){}return!1}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"createEvent",value:function(e,t){try{return new CustomEvent(e,{detail:t})}catch(i){var r={bubbles:!1,cancelable:!1,detail:t},n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),n}}}]),e}();t.default=o},,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(24),s=n(a),l=r(25),u=n(l),c=function(){function e(t){var r=t.logger,n=t.preference,o=void 0===n?"auto":n;return i(this,e),this.logger=r,this.preference=o,this.init()}return o(e,[{key:"init",value:function(){switch(this.logger.debug("Initializing Google Analytics with "+this.preference+" implementation."),this.preference){case"ga":return new s.default({logger:this.logger});case"gtag":return new u.default({logger:this.logger});case"auto":return this.isGtagAvailable()?new u.default({logger:this.logger}):new s.default({logger:this.logger})}}},{key:"isGtagAvailable",value:function(){var e=window.dataLayer&&Array.isArray(window.dataLayer);return"function"==typeof window.gtag&&e}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){var r=t.logger;i(this,e),this.logger=r,this.tracker=null,this.queue=[],this.interval=null,this.timerFrequency=500,this.retries=5,window.addEventListener("SocPluginRender",this._handleCampaignRender.bind(this)),window.addEventListener("SocPluginLogin",this._handleCampaignLogin.bind(this)),window.addEventListener("SocPluginRedirect",this._handleCampaignRedirect.bind(this));var n=this._retrieveTracker();this.logger.debug("Initialized GA class. GA object "+(n?"":"not")+" found")}return o(e,[{key:"_retrieveTracker",value:function(){var e=this;if(null!==this.tracker)return!0;var t=window.GoogleAnalyticsObject||"ga";if(!window[t]||"function"!=typeof window[t])return!1;var r="function"==typeof window[t].getAll;return r?this.tracker=window[t].getAll()[0]:window[t](function(){e.tracker=window[t].getAll()[0]}),r}},{key:"_handleCampaignRender",value:function(e){this._retrieveTracker()?this._send("Viewed",[this._extractCampaignID(e)+" - "+this._extractCampaignName(e),{nonInteraction:!0}]):(this.queue.push({name:"Viewed",data:[e.detail.campaignID+" - "+e.detail.campaignName,{nonInteraction:!0}]}),this._startTimer())}},{key:"_handleCampaignLogin",value:function(e){this._retrieveTracker()?this._send("Subscribed",this._extractCampaignID(e)+" - "+this._extractCampaignName(e)):(this.queue.push({name:"Subscribed",data:e.detail.campaignID+" - "+e.detail.campaignName}),this._startTimer())}},{key:"_handleCampaignRedirect",value:function(e){this._retrieveTracker()?this._send("Clicked",this._extractCampaignID(e)+" - "+this._extractCampaignName(e)):(this.queue.push({name:"Clicked",data:e.detail.campaignID+" - "+e.detail.campaignName}),this._startTimer())}},{key:"_send",value:function(e,t){try{if(Array.isArray(t)){var r;(r=this.tracker).send.apply(r,["event","Socital",e].concat(n(t)))}else this.tracker.send("event","Socital",e,t);this.logger.debug("[Events][ga] Sent '"+e+"': "+JSON.stringify(t))}catch(r){this.logger.error("[Events][ga] Error sending event '"+e+"': "+JSON.stringify(t)+" | "+r.message)}}},{key:"_startTimer",value:function(){var e=this;null===this.interval&&(this.interval=setInterval(function(){if(e.retries<=0)return e._clearTimer();e._retrieveTracker()?(e.queue.forEach(function(t){e._send(t.name,t.data)}),e.queue=[],e._clearTimer()):(e.retries--,e.logger.debug("[Events][ga] Trying to find ga. retries left: "+e.retries))},this.timerFrequency))}},{key:"_clearTimer",value:function(){this.logger.debug("[Events][ga] clearing timer"),clearInterval(this.interval),this.interval=null}},{key:"_extractCampaignID",value:function(e){var t="";try{t=e.detail.campaignID}catch(e){}return""===t&&console.debug("Could not find campaignID when sending to GA,",e),t}},{key:"_extractCampaignName",value:function(e){var t="";try{t=e.detail.campaignName}catch(e){}return""===t&&console.debug("Could not find campaignName when sending to GA,",e),t}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){var r=t.logger;n(this,e),this.logger=r,this.dataLayerIsArray=window.dataLayer&&Array.isArray(window.dataLayer),this.gtagIsFunction="function"==typeof window.gtag,this.gtagExists=this.gtagIsFunction&&this.dataLayerIsArray,this.gtagExists&&(window.addEventListener("SocPluginRender",this._handlePluginRender.bind(this)),window.addEventListener("SocPluginLogin",this._handlePluginLogin.bind(this)),window.addEventListener("SocPluginRedirect",this._handlePluginRedirect.bind(this))),r.debug("Initialized GTAG class.")}return i(e,[{key:"_handlePluginRender",value:function(e){var t={event_category:"Socital",event_label:this._extractCampaignID(e)+" - "+this._extractCampaignName(e),non_interaction:!0};try{window.gtag("event","Viewed",t),this.logger.debug("[Events][gtag] Sent 'Viewed': "+t.event_label)}catch(e){}}},{key:"_handlePluginLogin",value:function(e){var t={event_category:"Socital",event_label:this._extractCampaignID(e)+" - "+this._extractCampaignName(e)};try{window.gtag("event","Subscribed",t),this.logger.debug("[Events][gtag] Sent 'Subscribed': "+t.event_label)}catch(e){}}},{key:"_handlePluginRedirect",value:function(e){var t={event_category:"Socital",event_label:this._extractCampaignID(e)+" - "+this._extractCampaignName(e)};try{window.gtag("event","Clicked",t),this.logger.debug("[Events][gtag] Sent 'Clicked': "+t.event_label)}catch(e){}}},{key:"_extractCampaignID",value:function(e){var t="";try{t=e.detail.campaignID}catch(e){}return""===t&&console.debug("Could not find campaignID when sending to GTAG,",e),t}},{key:"_extractCampaignName",value:function(e){var t="";try{t=e.detail.campaignName}catch(e){}return""===t&&console.debug("Could not find campaignName when sending to GTAG,",e),t}}]),e}();t.default=o},function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(30),s=n(a),l=r(18),u=n(l),c=function(){function t(e){var r=e.env,n=e.child,o=e.pluginID,a=e.remoteLogUrl,l=e.level,u=e.browserID,c=e.clientID;return i(this,t),this.remoteLogUrl=a,this.browserID=u,this.pluginID=o,this.clientID=c,this.env=r,this.level=["info","debug","error","trace","warn"].includes(l)?l:"info",this.level=this.checkForLogCookie()||this.level,this.logger=s.default.createLogger({name:("socital-script - "+n).toLowerCase(),streams:[{level:this.level,stream:new s.default.ConsoleFormattedStream},{level:"info",stream:{write:this.remote.bind(this)},type:"raw"}],serializers:s.default.stdSerializers}),this.logger}return o(t,[{key:"remote",value:function(t){if(null!=this.remoteLogUrl){null!=this.browserID&&(t.browserID=this.browserID),null!=this.env&&(t.envData=this.env),null!=this.clientID&&(t.clientID=this.clientID),null!=this.pluginID&&(t.pluginID=this.pluginID),t.hasOwnProperty("component")||(t.component="Main");var r={method:"POST",body:JSON.stringify(t),mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}};e(this.remoteLogUrl,r)}}},{key:"checkForLogCookie",value:function(){return""!==u.default.get({name:"socitalLogLevel"})&&u.default.get({name:"socitalLogLevel"})}}]),t}();t.default=c}).call(t,r(11))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){function t(t){var r=e.match(t);return r&&r.length>1&&r[1]||""}function r(t){var r=e.match(t);return r&&r.length>1&&r[2]||""}var i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),s=!o&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),h=/tizen/i.test(e),p=/(web|hpw)([o0])s/i.test(e),g=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),y=!i&&!d&&/macintosh/i.test(e),m=!s&&!f&&!h&&!p&&/linux/i.test(e),b=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=t(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(e)&&!/tablet pc/i.test(e),O=!_&&/[^-]mobi/i.test(e),D=/xbox/i.test(e),k=void 0;/opera/i.test(e)?k={name:"Opera",opera:a,version:w||t(/(?:opera|opr|opios)[\s/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?k={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(e)?k={name:"Samsung Internet for Android",samsungBrowser:a,version:w||t(/(?:SamsungBrowser)[\s/](\d+(\.\d+)?)/i)}:/Whale/i.test(e)?k={name:"NAVER Whale browser",whale:a,version:t(/(?:whale)[\s/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(e)?k={name:"MZ Browser",mzbrowser:a,version:t(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i)}:/coast/i.test(e)?k={name:"Opera Coast",coast:a,version:w||t(/(?:coast)[\s/](\d+(\.\d+)?)/i)}:/focus/i.test(e)?k={name:"Focus",focus:a,version:t(/(?:focus)[\s/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(e)?k={name:"Yandex Browser",yandexbrowser:a,version:w||t(/(?:yabrowser)[\s/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?k={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?k={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?k={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?k={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?k={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?k={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s/](\d+(?:\.\d+)+)/i)}:g?(k={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},b?(k.msedge=a,k.version=b):(k.msie=a,k.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?k={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?k={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?k={name:"Microsoft Edge",msedge:a,version:b}:/vivaldi/i.test(e)?k={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||w}:f?k={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?k={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(k={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ /](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^)]*rv:[\d.]+\)/i.test(e)&&(k.firefoxos=a,k.osname="Firefox OS")):d?k={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?k={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?k={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?k={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:w||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(k={name:"WebOS",osname:"WebOS",webos:a,version:w||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(k.touchpad=a)):/bada/i.test(e)?k={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:h?k={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(e)?k={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(e)?k={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(e)?k={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?k={name:"Android",version:w}:/safari|applewebkit/i.test(e)?(k={name:"Safari",safari:a},w&&(k.version=w)):i?(k={name:"iphone"===i?"iPhone":"ipad"===i?"iPad":"iPod"},w&&(k.version=w)):k=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||w}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!k.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(k.name=k.name||"Blink",k.blink=a):(k.name=k.name||"Webkit",k.webkit=a),!k.version&&w&&(k.version=w)):!k.opera&&/gecko\//i.test(e)&&(k.name=k.name||"Gecko",k.gecko=a,k.version=k.version||t(/gecko\/(\d+(\.\d+)?)/i)),k.windowsphone||!s&&!k.silk?!k.windowsphone&&i?(k[i]=a,k.ios=a,k.osname="iOS"):y?(k.mac=a,k.osname="macOS"):D?(k.xbox=a,k.osname="Xbox"):v?(k.windows=a,k.osname="Windows"):m&&(k.linux=a,k.osname="Linux"):(k.android=a,k.osname="Android");var I="";k.windows?I=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):k.windowsphone?I=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):k.mac?(I=t(/Mac OS X (\d+([_.\s]\d+)*)/i),I=I.replace(/[_\s]/g,".")):i?(I=t(/os (\d+([_\s]\d+)*) like mac os x/i),I=I.replace(/[_\s]/g,".")):s?I=t(/android[ /-](\d+(\.\d+)*)/i):k.webos?I=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):k.blackberry?I=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):k.bada?I=t(/bada\/(\d+(\.\d+)*)/i):k.tizen&&(I=t(/tizen[/\s](\d+(\.\d+)*)/i)),I&&(k.osversion=I);var T=!k.windows&&I.split(".")[0];return _||u||"ipad"===i||s&&(3===T||T>=4&&!O)||k.silk?k.tablet=a:(O||"iphone"===i||"ipod"===i||s||l||k.blackberry||k.webos||k.bada)&&(k.mobile=a),k.msedge||k.msie&&k.version>=10||k.yandexbrowser&&k.version>=15||k.vivaldi&&k.version>=1||k.chrome&&k.version>=20||k.samsungBrowser&&k.version>=4||k.whale&&1===n([k.version,"1.0"])||k.mzbrowser&&1===n([k.version,"6.0"])||k.focus&&1===n([k.version,"1.0"])||k.firefox&&k.version>=20||k.safari&&k.version>=6||k.opera&&k.version>=10||k.ios&&k.osversion&&k.osversion.split(".")[0]>=6||k.blackberry&&k.version>=10.1||k.chromium&&k.version>=20?k.a=a:k.msie&&k.version<10||k.chrome&&k.version<20||k.firefox&&k.version<20||k.safari&&k.version<6||k.opera&&k.version<10||k.ios&&k.osversion&&k.osversion.split(".")[0]<6||k.chromium&&k.version<20?k.c=a:k.x=a,k}function t(e){return e.split(".").length}function r(e,t){var r=[],n=void 0;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),i=r(e,function(e){var i=n-t(e);return e+=new Array(i+1).join(".0"),r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(i[0][n]>i[1][n])return 1;if(i[0][n]!==i[1][n])return-1;if(0===n)return 0}}function i(t,r,i){var o=s;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(o=e(i));var a=""+o.version;for(var l in t)if(t.hasOwnProperty(l)&&o[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return n([a,t[l]])<0}return r}function o(e,t,r){return!i(e,t,r)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=n,s.check=o,s._detect=e,s.detect=e,s}},function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(27),s=n(a),l=r(19),u=n(l),c=function(){function t(e){var r=e.logger,n=e.browserID,o=e.userID,a=e.baseURL,s=e.disableTracking,l=e.sendEventFromParentWindow,u=void 0!==l&&l;i(this,t),this.userID=null,this.browserID=n,this.userID=o,this.baseURL=a,this.disableTracking=s,this.sendEventFromParentWindow=u,this.env=t.environment(),this.logger=r.child({childName:"Tracking"})}return o(t,[{key:"campaignRender",value:function(e){var t=this,r=e.campaign,n={campaignID:r._id,campaignType:r.displayType,campaignName:r.name,userID:this.userID,browserID:this.browserID,environment:this.env};return this._sendBrowserEvent({eventName:"SocPluginRender",eventData:n}).then(function(){return delete n.campaignName,t._sendBackendEvent({eventName:"render",eventData:n})})}},{key:"campaignLogin",value:function(e){var t=e.campaign,r=e.socialUserID,n={campaignID:t._id,campaignType:t.displayType,campaignName:t.name,userID:this.userID,browserID:this.browserID,environment:this.env,socialUserID:r};return this._sendBrowserEvent({eventName:"SocPluginLogin",eventData:n})}},{key:"campaignRedirect",value:function(e){var t=this,r=e.campaign,n=e.redirect,i={campaignID:r._id,campaignType:r.displayType,campaignName:r.name,userID:this.userID,browserID:this.browserID,environment:this.env,url:n.url,buttonUUID:n.buttonUUID};return this._sendBrowserEvent({eventName:"SocPluginRedirect",eventData:i}).then(function(){return delete i.campaignName,t._sendBackendEvent({eventName:"redirect",eventData:i})})}},{key:"campaignRecommendationView",value:function(e){var t=this,r=e.campaign,n=e.socialUserID,i=e.recommendationData,o={campaignID:r._id,campaignType:r.displayType,userID:this.userID,browserID:this.browserID,environment:this.env,socialUserID:n,recommendation:{url:i.clickThroughURL,image:i.imageURL}};return this._sendBrowserEvent({eventName:"SocPluginRecommendation",eventData:o}).then(function(){return t._sendBackendEvent({eventName:"recommendation",eventData:o})})}},{key:"campaignRecommendationClick",value:function(e){var t=this,r=e.campaign,n=e.socialUserID,i=e.recommendationData,o={campaignID:r._id,campaignType:r.displayType,userID:this.userID,browserID:this.browserID,environment:this.env,socialUserID:n,recommendation:{url:i.clickThroughURL,image:i.imageURL}};return this._sendBrowserEvent({eventName:"SocPluginRecommendationClick",eventData:o}).then(function(){return t._sendBackendEvent({eventName:"recommendationClick",eventData:o})})}},{key:"_sendBackendEvent",value:function(t){var r=this,n=t.eventName,i=t.eventData;return!0===this.disableTracking?Promise.resolve():(this.logger.debug("Sent "+n+": "+this._toString(i)),e(this.baseURL+"/api/v1/track/"+n,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return null!=e.error?(r.logger.error("Tracking event failed: "+JSON.stringify(e.error)+", "+n+" "+r._toString(i)),Promise.reject(new Error(e.error))):Promise.resolve()}))}},{key:"_sendBrowserEvent",value:function(e){var t=e.eventName,r=e.eventData;return this.sendEventFromParentWindow?Promise.resolve(window.parent.dispatchEvent(u.default.createEvent(t,r))):Promise.resolve(window.dispatchEvent(u.default.createEvent(t,r)))}},{key:"_toString",value:function(e){var t=null,r=null,n=null,i=null,o=null;try{t=e.campaignID}catch(e){}try{r=e.browserID}catch(e){}try{n=e.campaignType}catch(e){}try{i=e.environment.deviceType}catch(e){}try{o=e.environment.browser.name}catch(e){}return"["+t+"] ["+n+"] | from a "+i+" on "+o+" browser | browserID: "+r}}],[{key:"environment",value:function(){var e={};try{e=(0,s.default)()}catch(e){}var t=e,r={};return r.deviceType=function(e){var t=null;return e&&(e.windows||e.mac||e.linux?t="desktop":e.tablet||e.nexusTablet?t="tablet":e.mobile||e.nexusMobile||e.windowsphone?t="mobile":e.xbox&&(t="console")),t}(t),r.browser=function(e){var t={};return t.name=e.hasOwnProperty("name")?e.name:navigator.appName,t.version=e.hasOwnProperty("version")?e.version:navigator.appVersion,t.osname=e.hasOwnProperty("osname")?e.osname:navigator.platform,t}(e),r.url=function(){var e={};return e.current=window.location.href,e.referrer=document.referrer,e}(),r.timeOffset=(new Date).getTimezoneOffset(),r.userAgent=navigator.userAgent,r.resolution=function(){return{height:window.screen.availHeight,width:window.screen.availWidth}}(),r.languages=function(){var e=[];return navigator.hasOwnProperty("userLanguage")&&(e=[navigator.userLanguage]),navigator.hasOwnProperty("language")&&(e=[navigator.language]),e}(),r}}]),t}();t.default=c}).call(t,r(11))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"getLink",value:function(e){var t=Object.keys(e),r=new Set;return t.forEach(function(t){var n=e[t].value+":400,700";r.has(n)||r.add(n)}),"https://fonts.googleapis.com/css?family="+encodeURIComponent(Array.from(r).join("|"))+"&amp;subset=greek"}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){if(void 0===e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function i(e,t){var r=e.split("\n");r[0]&&r[0].indexOf(v)>=0&&r.shift();var n=r[t],i=null;if(n){var o=/^\s*(at|.*@)\s*(.+)?$/.exec(n);i=Array.isArray(o)&&o[2]?o[2]:n}return i}function o(e,t){return t||(t="    "),t+e.split(/\r?\n/g).join("\n"+t)}function a(e,t){if(t){if(b[t])return;b[t]=!0}console.error(e+"\n")}function s(e){return b[e]}function l(){}function u(e){e=e||{},this.logByLevel=!!e.logByLevel}function c(e){return"string"==typeof e?T[e.toLowerCase()]:e}function d(e,t,r){if(!(this instanceof d))return new d(e,t);var i;if(void 0!==t&&(i=e,e=t,!(i instanceof d)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var o,a,s;if(i&&r){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,o=this.fields={};var u=Object.keys(i.fields);for(s=0;s<u.length;s++)a=u[s],o[a]=i.fields[a];var c=Object.keys(e);for(s=0;s<c.length;s++)a=c[s],o[a]=e[a]}else{var f=this;if(i){for(this._level=i._level,this.streams=[],s=0;s<i.streams.length;s++){var h=n(i.streams[s]);h.closeOnExit=!1,this.streams.push(h)}this.serializers=n(i.serializers),this.src=i.src,this.fields=n(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?f.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){f.addStream(t,e.level)}):i&&e.level?this.level(e.level):i||f.addStream({type:"raw",stream:new l,closeOnExit:!1,level:e.level}),e.serializers&&f.addSerializers(e.serializers),e.src&&(this.src=!0),o=n(e),delete o.stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),Object.keys(o).forEach(function(e){f.fields[e]=o[e]})}}function f(e){return function(){var t=this,r=null,o=arguments,l=null;if(0===arguments.length)return this._level<=e;this._level>e||(l=function(l){var u;l[0]instanceof Error?(r={err:t.serializers&&t.serializers.err?t.serializers.err(l[0]):d.stdSerializers.err(l[0])},u={err:!0},o=1===l.length?[r.err.message]:Array.prototype.slice.call(l,1)):"object"!=typeof l[0]&&null!==l[0]||Array.isArray(l[0])?(r=null,o=Array.prototype.slice.call(l)):(r=l[0],o=1===l.length&&r.err&&r.err instanceof Error?[r.err.message]:Array.prototype.slice.call(l,1));var c=n(t.fields);c.level=e;var f=r?n(r):null;if(f&&(t.serializers&&t._applySerializers(f,u),Object.keys(f).forEach(function(e){c[e]=f[e]})),c.levelName=S[e],c.msg=o.length?m.apply(t,o):"",c.time||(c.time=new Date),t.src&&!c.src)try{throw new Error(v)}catch(e){var h=i(e.stack,2);h||s("src")||a("Unable to determine src line info","src"),c.src=h||""}return c.v=g,c}(o),this._emit(l))}}function h(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+h(r))}return t}function p(){var e=[];return function(t,r){return r&&"object"==typeof r?-1!==e.indexOf(r)?"[Circular]":(e.push(r),r):r}}var g=0,v="call-stack-error",y=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"[ "+e.map(function(e){return y(e)}).join(", ")+" ]":"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"},m=function(e){if("string"!=typeof e){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++)t[r]=y(arguments[r]);return t.join(" ")}for(var n=/%[sdj%]/g,i=1,o=arguments,a=o.length,s=String(e).replace(n,function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(e){return"[Circular]"}break;default:return e}}),l=o[i];i<a;l=o[++i])s+=" "+l;return s},b={};l.prototype.write=function(e){e.level<O?console.log(e):e.level<D?console.info(e):e.level<k?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},u.prototype.write=function(e){function t(e,t){return Array(t+1-(e+"").length).join("0")+e}var r,n,i=e.childName?e.name+"/"+e.childName:e.name,o=S[e.level],a=(Array(6-o.length).join(" ")+o).toUpperCase();this.logByLevel?(e.level===w?o="debug":e.level===I&&(o="error"),n="function"==typeof console[o]?console[o]:console.log):n=console.log,r=e.level<_?"color: DeepPink":e.level<O?"color: GoldenRod":e.level<D?"color: DarkTurquoise":e.level<k?"color: Purple":e.level<I?"color: Crimson":"color: Black";var s=[];s.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s"),s.push(t(e.time.getHours(),2)),s.push(t(e.time.getMinutes(),2)),s.push(t(e.time.getSeconds(),2)),s.push(t(e.time.getMilliseconds(),4)),s.push(r),s.push(a),s.push("color: DimGray"),s.push(i),s.push("color: SteelBlue"),s.push(e.msg),e.src&&(s.push("color: DimGray; font-style: italic; font-size: 0.9em"),s.push(e.src)),n.apply(console,s),e.err&&e.err.stack&&n.call(console,"%c%s,",r,e.err.stack),e.obj&&n.call(console,e.obj)};var w=10,_=20,O=30,D=40,k=50,I=60,T={trace:w,debug:_,info:O,warn:D,error:k,fatal:I},S={};Object.keys(T).forEach(function(e){S[T[e]]=e}),d.prototype.addStream=function(e,t){var r=this;null!==t&&void 0!==t||(t=O),e=n(e),e.type="raw",e.level?e.level=c(e.level):e.level=c(t),e.level<r._level&&(r._level=e.level),e.closeOnExit||(e.closeOnExit=!1),r.streams.push(e),delete r.haveNonRawStreams},d.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(m('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},d.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},d.prototype.level=function(e){if(void 0===e)return this._level;for(var t=c(e),r=this.streams.length,n=0;n<r;n++)this.streams[n].level=t;this._level=t},d.prototype.levels=function(e,t){if(void 0===e)return this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(void 0===(r=this.streams[e]))throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;i<n;i++){var o=this.streams[i];if(o.name===e){r=o;break}}if(!r)throw new Error(m('no stream with name "%s"',e))}if(void 0===t)return r.level;var a=c(t);r.level=a,a<this._level&&(this._level=a)},d.prototype._applySerializers=function(e,t){var r=this;Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n]))try{e[n]=r.serializers[n](e[n])}catch(t){a(m('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,t.stack||t)),e[n]=m('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}})},d.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,p())+"\n"}catch(t){var i=t.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+o(m("%s\n%s",e,t.stack)),i),n=m("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",t.message)}if(t)return n;var s=e.level;for(r=0;r<this.streams.length;r++){var l=this.streams[r];l.level<=s&&l.stream.write(e)}return n},d.prototype.trace=f(w),d.prototype.debug=f(_),d.prototype.info=f(O),d.prototype.warn=f(D),d.prototype.error=f(k),d.prototype.fatal=f(I),d.stdSerializers={},d.stdSerializers.err=function(e){return e&&e.stack?{message:e.message,name:e.name,stack:h(e),code:e.code,signal:e.signal}:e},e.exports=d,e.exports.TRACE=w,e.exports.DEBUG=_,e.exports.INFO=O,e.exports.WARN=D,e.exports.ERROR=k,e.exports.FATAL=I,e.exports.resolveLevel=c,e.exports.levelFromName=T,e.exports.nameFromLevel=S,e.exports.VERSION="0.4.0",e.exports.LOG_VERSION=g,e.exports.createLogger=function(e){return new d(e)},e.exports.safeCycles=p,e.exports.ConsoleFormattedStream=u,e.exports.ConsoleRawStream=l},function(e,t,r){(function(n){var i;!function(n){"use strict";function o(e){var t=e&&e.Promise||n.Promise,r=e&&e.XMLHttpRequest||n.XMLHttpRequest,i=n;return function(){var e=Object.create(i,{fetch:{value:void 0,writable:!0}});return function(e){function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){if(e.bodyUsed)return t.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new t(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader,r=l(t);return t.readAsArrayBuffer(e),r}function c(e){var t=new FileReader,r=l(t);return t.readAsText(e),r}function d(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&_(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!O(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||t.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return D.indexOf(t)>-1?t:e}function g(e,t){t=t||{};var r=t.body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function y(e){var t=new a;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},O=ArrayBuffer.isView||function(e){return e&&w.indexOf(Object.prototype.toString.call(e))>-1};a.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];this.map[e]=r?r+","+t:t},a.prototype.delete=function(e){delete this.map[n(e)]},a.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},a.prototype.set=function(e,t){this.map[n(e)]=i(t)},a.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),o(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),o(e)},b.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},h.call(g.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];m.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=g,e.Response=m,e.fetch=function(e,n){return new t(function(t,i){var o=new g(e,n),a=new r;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:y(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;t(new m(r,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&b.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}(void 0!==e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}void 0!==(i=function(){return o}.call(t,r,t,e))&&(e.exports=i)}("undefined"!=typeof self?self:void 0!==n?n:this)}).call(t,r(14))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(37);r.d(t,"v1",function(){return n.a});var i=r(38);r.d(t,"v3",function(){return i.a});var o=r(39);r.d(t,"v4",function(){return o.a});var a=r(40);r.d(t,"v5",function(){return a.a});var s=r(34);r.d(t,"NIL",function(){return s.a});var l=r(41);r.d(t,"version",function(){return l.a});var u=r(10);r.d(t,"validate",function(){return u.a});var c=r(9);r.d(t,"stringify",function(){return c.a});var d=r(15);r.d(t,"parse",function(){return d.a})},function(e,t,r){"use strict";function n(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return i(a(s(e),8*e.length))}function i(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(a)}return t}function o(e){return 14+(e+64>>>9<<4)+1}function a(e,t){e[t>>5]|=128<<t%32,e[o(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,s=0;s<e.length;s+=16){var u=r,c=n,g=i,v=a;r=d(r,n,i,a,e[s],7,-680876936),a=d(a,r,n,i,e[s+1],12,-389564586),i=d(i,a,r,n,e[s+2],17,606105819),n=d(n,i,a,r,e[s+3],22,-1044525330),r=d(r,n,i,a,e[s+4],7,-176418897),a=d(a,r,n,i,e[s+5],12,1200080426),i=d(i,a,r,n,e[s+6],17,-1473231341),n=d(n,i,a,r,e[s+7],22,-45705983),r=d(r,n,i,a,e[s+8],7,1770035416),a=d(a,r,n,i,e[s+9],12,-1958414417),i=d(i,a,r,n,e[s+10],17,-42063),n=d(n,i,a,r,e[s+11],22,-1990404162),r=d(r,n,i,a,e[s+12],7,1804603682),a=d(a,r,n,i,e[s+13],12,-40341101),i=d(i,a,r,n,e[s+14],17,-1502002290),n=d(n,i,a,r,e[s+15],22,1236535329),r=f(r,n,i,a,e[s+1],5,-165796510),a=f(a,r,n,i,e[s+6],9,-1069501632),i=f(i,a,r,n,e[s+11],14,643717713),n=f(n,i,a,r,e[s],20,-373897302),r=f(r,n,i,a,e[s+5],5,-701558691),a=f(a,r,n,i,e[s+10],9,38016083),i=f(i,a,r,n,e[s+15],14,-660478335),n=f(n,i,a,r,e[s+4],20,-405537848),r=f(r,n,i,a,e[s+9],5,568446438),a=f(a,r,n,i,e[s+14],9,-1019803690),i=f(i,a,r,n,e[s+3],14,-187363961),n=f(n,i,a,r,e[s+8],20,1163531501),r=f(r,n,i,a,e[s+13],5,-1444681467),a=f(a,r,n,i,e[s+2],9,-51403784),i=f(i,a,r,n,e[s+7],14,1735328473),n=f(n,i,a,r,e[s+12],20,-1926607734),r=h(r,n,i,a,e[s+5],4,-378558),a=h(a,r,n,i,e[s+8],11,-2022574463),i=h(i,a,r,n,e[s+11],16,1839030562),n=h(n,i,a,r,e[s+14],23,-35309556),r=h(r,n,i,a,e[s+1],4,-1530992060),a=h(a,r,n,i,e[s+4],11,1272893353),i=h(i,a,r,n,e[s+7],16,-155497632),n=h(n,i,a,r,e[s+10],23,-1094730640),r=h(r,n,i,a,e[s+13],4,681279174),a=h(a,r,n,i,e[s],11,-358537222),i=h(i,a,r,n,e[s+3],16,-722521979),n=h(n,i,a,r,e[s+6],23,76029189),r=h(r,n,i,a,e[s+9],4,-640364487),a=h(a,r,n,i,e[s+12],11,-421815835),i=h(i,a,r,n,e[s+15],16,530742520),n=h(n,i,a,r,e[s+2],23,-995338651),r=p(r,n,i,a,e[s],6,-198630844),a=p(a,r,n,i,e[s+7],10,1126891415),i=p(i,a,r,n,e[s+14],15,-1416354905),n=p(n,i,a,r,e[s+5],21,-57434055),r=p(r,n,i,a,e[s+12],6,1700485571),a=p(a,r,n,i,e[s+3],10,-1894986606),i=p(i,a,r,n,e[s+10],15,-1051523),n=p(n,i,a,r,e[s+1],21,-2054922799),r=p(r,n,i,a,e[s+8],6,1873313359),a=p(a,r,n,i,e[s+15],10,-30611744),i=p(i,a,r,n,e[s+6],15,-1560198380),n=p(n,i,a,r,e[s+13],21,1309151649),r=p(r,n,i,a,e[s+4],6,-145523070),a=p(a,r,n,i,e[s+11],10,-1120210379),i=p(i,a,r,n,e[s+2],15,718787259),n=p(n,i,a,r,e[s+9],21,-343485551),r=l(r,u),n=l(n,c),i=l(i,g),a=l(a,v)}return[r,n,i,a]}function s(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(o(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}function l(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function u(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,i,o){return l(u(l(l(t,e),l(n,o)),i),r)}function d(e,t,r,n,i,o,a){return c(t&r|~t&n,e,t,i,o,a)}function f(e,t,r,n,i,o,a){return c(t&n|r&~n,e,t,i,o,a)}function h(e,t,r,n,i,o,a){return c(t^r^n,e,t,i,o,a)}function p(e,t,r,n,i,o,a){return c(r^(t|~n),e,t,i,o,a)}t.a=n},function(e,t,r){"use strict";t.a="00000000-0000-0000-0000-000000000000"},function(e,t,r){"use strict";t.a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function i(e,t){return e<<t|e>>>32-t}function o(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var a=0;a<o.length;++a)e.push(o.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,l=Math.ceil(s/16),u=new Array(l),c=0;c<l;++c){for(var d=new Uint32Array(16),f=0;f<16;++f)d[f]=e[64*c+4*f]<<24|e[64*c+4*f+1]<<16|e[64*c+4*f+2]<<8|e[64*c+4*f+3];u[c]=d}u[l-1][14]=8*(e.length-1)/Math.pow(2,32),u[l-1][14]=Math.floor(u[l-1][14]),u[l-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<l;++h){for(var p=new Uint32Array(80),g=0;g<16;++g)p[g]=u[h][g];for(var v=16;v<80;++v)p[v]=i(p[v-3]^p[v-8]^p[v-14]^p[v-16],1);for(var y=r[0],m=r[1],b=r[2],w=r[3],_=r[4],O=0;O<80;++O){var D=Math.floor(O/20),k=i(y,5)+n(D,m,b,w)+_+t[D]+p[O]>>>0;_=w,w=b,b=i(m,30)>>>0,m=y,y=k}r[0]=r[0]+y>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+_>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}t.a=o},function(e,t,r){"use strict";function n(e,t,n){var c=t&&n||0,d=t||new Array(16);e=e||{};var f=e.node||i,h=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==h){var p=e.random||(e.rng||a.a)();null==f&&(f=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=o=16383&(p[6]<<8|p[7]))}var g=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:u+1,y=g-l+(v-u)/1e4;if(y<0&&void 0===e.clockseq&&(h=h+1&16383),(y<0||g>l)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=g,u=v,o=h,g+=122192928e5;var m=(1e4*(268435455&g)+v)%4294967296;d[c++]=m>>>24&255,d[c++]=m>>>16&255,d[c++]=m>>>8&255,d[c++]=255&m;var b=g/4294967296*1e4&268435455;d[c++]=b>>>8&255,d[c++]=255&b,d[c++]=b>>>24&15|16,d[c++]=b>>>16&255,d[c++]=h>>>8|128,d[c++]=255&h;for(var w=0;w<6;++w)d[c+w]=f[w];return t||r.i(s.a)(d)}var i,o,a=r(16),s=r(9),l=0,u=0;t.a=n},function(e,t,r){"use strict";var n=r(17),i=r(33),o=r.i(n.a)("v3",48,i.a);t.a=o},function(e,t,r){"use strict";function n(e,t,n){e=e||{};var a=e.random||(e.rng||i.a)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=a[s];return t}return r.i(o.a)(a)}var i=r(16),o=r(9);t.a=n},function(e,t,r){"use strict";var n=r(17),i=r(36),o=r.i(n.a)("v5",80,i.a);t.a=o},function(e,t,r){"use strict";function n(e){if(!r.i(i.a)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var i=r(10);t.a=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(12),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n(this,e),this.state="created",this.delay=150,this.event=t,this.boundFunction=null,this.timer=null,this.constructor===e)throw new TypeError("Class `ObserverAbstract` must not be instantiated directly.");if("string"!=typeof this.event)throw new TypeError("Event name must be a string when initiating an Observer")}return i(e,[{key:"action",value:function(){throw new TypeError("Action function need to be overridden")}},{key:"init",value:function(){if("created"===this.state){if("function"!=typeof this.action)throw new TypeError("Action needs to be a function");var e=function(t){this._cancelTimer(),this.timer=setTimeout(function(){if(!0===this.action(t))return(0,o.unbindEvent)(window,this.event,e),this.state="finished",Promise.resolve()}.bind(this),this.delay)}.bind(this);(0,o.bindEvent)(window,this.event,e),this.state="observing"}}},{key:"_cancelTimer",value:function(){this.timer&&clearTimeout(this.timer)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollObserver=t.ResizeObserver=void 0;var i=r(72),o=n(i),a=r(73),s=n(a);t.ResizeObserver=o.default,t.ScrollObserver=s.default},function(e,t,r){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(65),a=function(){function t(){n(this,t)}return i(t,null,[{key:"fetchTargets",value:function(t,r,n){var i=null,a=null,s=null,l={"X-SOCITAL-DOMAIN":n},u={method:"GET",headers:l};return Promise.resolve().then(function(){if(!r||""===r)throw new o.WrongUserIDError(r);return e(t+"/api/v1/target?userID="+r,u)}).then(function(e){return i=e.status,a=e.statusText,s=e.type,e.json()}).then(function(e){if(403===i)throw new o.DomainNotAllowedError;if(422===i)throw new o.InvalidUserOrSubError(e.error);if(!0!==e.success)throw new o.FetchTargetsError({status:i,statusText:a,type:s,body:e});var t={plugins:e.plugins,domain:e.domain,googleAnalytics:e.analyticsEnabled,whitelisted:e.whitelisted,trackingSettings:e.trackingSettings};return t.googleAnalytics&&(t.googleAnalyticsPreference=e.analyticsPreference),t})}},{key:"saveOrder",value:function(t,r,n){var i={"X-SOCITAL-DOMAIN":n,"Content-Type":"application/json"},o={method:"POST",headers:i,body:JSON.stringify(r)};return Promise.resolve().then(function(){return e(t+"/api/v1/orders",o)})}}]),t}();t.default=a}).call(t,r(11))},,,function(e,t,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},,,,,,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(28),o=n(i),a=r(12),s=n(a),l=r(26),u=n(l),c=r(77),d=n(c),f=r(62),h=n(f),p=s.default.baseURL(),g=s.default.getBrowserID(),v=s.default.getLogLevel(),y=s.default.retrieveUserID(),m=s.default.getDisableTracking(),b=s.default.getIsDevelopment(),w=new u.default({child:"campaign-manager",env:o.default.environment(),remoteLogUrl:p+"/api/v1/pluginLogMessage",level:v,browserID:g,clientID:y}),_=new o.default({logger:w,browserID:g,userID:y,baseURL:p,disableTracking:m}),O=(0,h.default)({htmlElement:document.getElementsByTagName("html")[0],userID:y,dev:b,env:o.default.environment(),logWebHookURL:p+"/api/v1/pluginLogMessage",logLevel:v,baseURL:p,logger:w,tracker:_,browserID:g}),D=new d.default(O);window.socital={triggerPlugin:D.triggerPluginProgrammatically.bind(D),init:function(){return O.iframes=[],O.plugins=[],O.pluginsRendered=[],O.targets=[],O.pluginIDs=[],O.initialize()}},document.addEventListener("DOMContentLoaded",function(){O.initialize()}),"loading"!==document.readyState&&O.initialize()},,,,function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){switch(e.type){case"cartValue":var r=new S.default.TargetCartValue({values:e.values,cartValue:G.shopifyCart.total_price}).check();return G.logger.debug("   cartValue                  "+r+"    "+JSON.stringify(e.values)),r;case"pagesVisited":var n=new S.default.TargetPagesVisited({values:e.values,pluginID:t}).check();return G.logger.debug("   pagesVisited                  "+n+"    "+JSON.stringify(e.values)),n;case"url":var i=new S.default.TargetUrl({values:e.values}).check();return G.logger.debug("   url                  "+i+"    "+JSON.stringify(e.values)),i;case"returningVisitors":var o=new S.default.TargetReturningVisitors({values:e.values}).check();return G.logger.debug("   returningVisitors    "+o+"    "+JSON.stringify(e.values)),o;case"newVisitors":var a=new S.default.TargetNewVisitors({values:e.values}).check();return G.logger.debug("   newVisitors          "+a+"    "+JSON.stringify(e.values)),a;case"mobileDevice":var s=new S.default.TargetMobileDevice({values:e.values}).check();return G.logger.debug("   mobileDevice         "+s+"    "+JSON.stringify(e.values)),s;case"desktopDevice":var l=new S.default.TargetDesktopDevice({values:e.values}).check();return G.logger.debug("   desktopDevice        "+l+"    "+JSON.stringify(e.values)),l;case"referrerDomain":var u=new S.default.TargetReferrerDomain({values:e.values}).check();return G.logger.debug("   referrerDomain       "+u+"    "+JSON.stringify(e.values)),u;case"queryParameter":var c=new S.default.TargetQueryParameters({values:e.values}).check();return G.logger.debug("   queryParameter       "+c+"    "+JSON.stringify(e.values)),c;case"urlContains":var d=new S.default.TargetUrlContains({values:e.values}).check();return G.logger.debug("   urlContains          "+d+"    "+JSON.stringify(e.values)),d;case"authorizedUsers":var f=new S.default.TargetAuthorizedUsers({pluginID:t,values:e.values}).check();return G.logger.debug("   authorizedUsers      "+f+"    "+JSON.stringify(e.values)),f;case"pastInteraction":var h=new S.default.TargetPastInteractionFactory({interaction:e.interaction}),p=h.check();return G.logger.debug("   pastInteraction      "+p+"    "+e.interaction.condition+" "+e.interaction.name+": "+JSON.stringify(e.interaction.values)),p;case"userDefinedCookie":var g=new S.default.UserDefinedCookie({values:e.values}).check();return G.logger.debug("   userDefinedCookieTarget      "+g+"    "+JSON.stringify(e.values)),g;default:G.logger.debug("Unknown targeting rule")}}function o(e,t,r){var n={};switch(e.type){case"delay":n=new N.default.TriggerDelay({value:e.value});break;case"exit":n=new N.default.TriggerExit;break;case"scroll":n=new N.default.TriggerScroll({value:e.value});break;case"manual":n=new N.default.TriggerManual}return G.logger.debug(r,"["+r.pluginID+"] Setting "+n.toString()+" for campaign"),n.init().then(function(){return G.doRender(t,r)})}function a(e,t){var r=!0;return"popup"===t.displayType&&(G.popupSemaphore.lock(t)?E.default.set({name:"socitalPlugin"+t.pluginID,value:!0,expiresInDays:7}):r=!1),"scrollBox"===t.displayType&&E.default.set({name:"socitalPlugin"+t.pluginID,value:!0,expiresInDays:7}),r?e.render():Promise.resolve()}function s(e){G.logger.debug({pluginID:e._id},"["+e._id+"] ["+e.displayType+"] Initializing");var t=e.behavior[0];switch(e.displayType){case"popup":if(!(G.dev||"true"!==E.default.get({name:"socitalPlugin"+e.pluginID})||(G.logger.debug({pluginID:e._id},"The plugin has been already shown once"),e.success&&e.socialToken&&e.socialUser)))return;var r=new M.default.IframePopup({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return G.iframes.push({type:"popup",iframe:r}),r.init(),r.append(),r.style(),G.setTrigger(t,r,e);case"bar":if(!G.dev&&"true"===E.default.get({name:"SocitalBar:"+e.pluginID+":closed"}))return void G.logger.debug({pluginID:e._id},"The plugin has been closed");if(!G.dev&&"true"===E.default.get({name:"SocitalBar:"+e.pluginID+":clicked"}))return void G.logger.debug({pluginID:e._id},"The plugin has been clicked");var n=new M.default.IframeBar({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return G.iframes.push({type:"bar",iframe:n}),n.init(),n.append(),n.style(),G.setTrigger(t,n,e);case"embedded":var i=new M.default.IframeEmbedded({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return G.iframes.push({type:"embedded",iframe:i}),i.init(),i.append(),i.style(),i.render();case"slideUp":var o=new M.default.IframeSlideUp({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return G.iframes.push({type:"slideUp",iframe:o}),o.init(),o.append(),o.style(),G.setTrigger(t,o,e);case"scrollBox":if(!G.dev&&"true"===E.default.get({name:"socitalPlugin"+e.pluginID}))return void G.logger.debug({pluginID:e._id},"The plugin has been already shown once");var a=new M.default.IframeScrollBox({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return G.iframes.push({type:"scrollBox",iframe:a}),a.init(),a.append(),a.style(),G.setTrigger(t,a,e);case"popupButton":var s=new M.default.IframePopupButtonModal({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions}),l=new M.default.IframePopupButtonCTA({plugin:e,iframePopupButtonModal:s,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,logOptions:G.logOptions});return l.init(),s.init(),l.append(),s.append(),l.style(),s.style(),s.render(),G.iframes.push({type:"popupButton",iframe:{CTA:l,modal:s}}),G.setTrigger(t,l,e);case"sideTab":var u=new M.default.IframeSideTabCTA({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,logOptions:G.logOptions}),c=new M.default.IframeSideTabModal({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,tracker:G.tracker,logOptions:G.logOptions});return u.init(),c.init(),u.append(),c.append(),u.style(),u.setPosition(),c.style(),c.setPosition(),c.render(),G.iframes.push({type:"sideTab",iframe:{CTA:u,modal:c}}),G.setTrigger(t,u,e);case"none":var d=new M.default.IframeNone({plugin:e,browserID:G.browserID,baseURL:G.baseURL,logger:G.logger,envData:G.env,clientID:G.socitalUserID,logOptions:G.logOptions});d.init(),d.append(),d.style(),G.iframes.push({type:"none",iframe:d});break;default:G.logger.warn("Unknown display type")}}function l(){var e=Date.now().toString(),t=E.default.get({name:"socital"});t&&(e=isNaN(Date.parse(t))?t:Date.parse(t)),E.default.set({name:"socital",value:e,expiresInDays:365})}function u(e,t){"number"==typeof t&&(t+="px"),document.getElementById(e).style.height=t;var r=L.default.createEvent("socitalPluginResized",{pluginID:e,height:t});document.dispatchEvent(r)}function c(e){var t=G.iframes.find(function(t){return!!t.iframe.CTA&&t.iframe.CTA._plugin._id===e._id});if(t)return t.iframe.modal.open()}function d(e,t){var r=document.getElementById(e),n=function(e){e.parentNode.removeChild(e);var t=G.popupSemaphore.release(),r=G.iframes.filter(function(e){return"popup"===e.type});t.forEach(function(e){var t=r.find(function(t){return t.iframe.id===e.pluginID});t&&e.behavior.forEach(function(r){return G.setTrigger(r,t.iframe,e)})})};t?window.confirm("Your submission is incomplete. If you close this window all changes will be lost.")&&n(r):n(r)}function f(e){var t=!1,r=!0,n=e.targets.filter(function(e){return"hide"===e.action}),i=e.targets.filter(function(e){return"show"===e.action});return n.length>0&&G.logger.debug({pluginID:e._id}," Hide plugin "+e._id+" if "),t=n.some(function(t){return G.checkTargetingRule(t,e._id)}),i.length>0&&G.logger.debug({pluginID:e._id}," Show plugin "+e._id+" if "),r=i.every(function(t){return G.checkTargetingRule(t,e._id)}),!t&&r}function h(){var t=G.campaigns.map(function(e){return"id="+encodeURIComponent(e._id)}).join("&");return e(G.baseURL+"/api/v1/plugin?"+t).then(function(e){return e.json()}).then(function(e){if(!e.success)return Promise.reject(new Error("Could not fetch plugins"));G.campaigns=G.campaigns.map(function(t){var r=e.plugins.find(function(e){return e.pluginID===t._id});return Object.assign(t,r)})})}function p(){var e=G.campaigns.filter(function(e){return e.behavior&&e.behavior.some(function(e){return"delay"===e.type&&e.value>0})}),t=e.map(function(e){return e.style.images.filter(function(e){return""!==e.url}).map(function(e){return e.url})});if(t.length>0){var r=new A.default(t);r.prepareCaching(),r.cache()}}function g(){if(G.initialized)return!1;E.default.isLocalStorageAvailable()&&E.default.migrateCookies(),G.getTargets(G.env.url.current).then(function(e){var t=new V.default(G,window.location.origin,G.baseURL),r=new H.default(G);return t.trackOrder(r),r.initiateListeners(),r.initiateCustomListeners(e.trackingSettings),G.preInit(e),G.initialized=!0,v(),G.campaigns=G.campaigns.filter(function(e){return f(e)}),G.getCampaigns().then(function(){return G.logger.trace("  Campaign IDs to SHOW "),G.campaigns.forEach(function(e){G.logger.trace(" | "+e._id+" ["+e.displayType+"]")}),G.logger.trace(" "),G.preloadImages(),G.setSocitalCookie(),G.parseWebviewStateToCookie(),G.postInit(),Promise.all(G.campaigns.map(function(e){var t=E.default.get({name:"SocitalPending:"+e._id});if(""!==t){var r=JSON.parse(decodeURIComponent(t));for(var n in r)e[n]=r[n];E.default.set({name:"SocitalPending:"+e._id,expiresInDays:0})}return G.init(e)}))})}).catch(function(e){if("Operational"===e.type)return void console.error(e);e.message="Failed on campaign manager initialization: "+e.message,G.logger.fatal(e)})}function v(){new U.ResizeObserver(function(){return G.resizeAllPlugins(),!1}).init(),G.logger.debug("Initialized Resize Observer for campaigns")}function y(){G.campaigns.forEach(function(e){var t=document.getElementById(e._id);if(null!==t)try{var r=t.contentDocument.getElementsByClassName("socital-plugin-wrapper")[0].scrollHeight;G.resizePlugin(e._id,r)}catch(e){}})}function m(e){G.logger.debug("Creating campaign manager:\n    "+e.plugins.length+" campaigns,\n    domain: "+e.domain+",\n    google analytics: "+(e.googleAnalytics?"enabled":"disabled")+",\n    on a "+(e.whitelisted?"":"non ")+"whitelisted domain."),W.default.setDomainInLocalStorage({logger:G.logger,domain:e.domain}),W.default.googleAnalytics({logger:G.logger,preference:e.googleAnalyticsPreference,enabled:e.googleAnalytics}),W.default.checkWhitelisted({whitelisted:e.whitelisted,logger:G.logger,userID:G.socitalUserID}),G.campaigns=e.plugins}function b(){window.addEventListener("message",function(e){if("webpackWarnings"!==e.data.type){G.logger.trace("Received message "+JSON.stringify(e.data));try{switch(e.data.messageType){case"SocitalResizePluginContainer":G.resizePluginContainer(e.data.pluginID,e.data.height);break;case"SocitalCloseIFrame":G.closeIFrame(e.data.pluginID,e.data.emailAsked);break;case"SocitalRedirect":(0,B.redirect)(e.data.value);break;case"SocitalDownload":var t=document.createElement("a");t.download=e.data.value,t.href=e.data.value,t.click();break;case"SocitalResizePlugin":G.resizePlugin(e.data.pluginID,e.data.height);break;case"SocitalOpenModal":G.openModal(e.data.campaign);break;default:G.logger.trace("Received message "+JSON.stringify(e.data)+" with unknown type")}}catch(e){G.logger.error({err:e})}}}),window.addEventListener("socitalPluginResized",function(e){var t=G.plugins.find(function(t){return t.pluginID===e.detail.pluginID});if(null===t||void 0===t)return!1;if("sideTab"!==t.displayType)return!1;var r=G.iframes.find(function(t){return!!t.iframe.modal&&t.iframe.modal.id===e.detail.pluginID});r&&r.iframe.modal.setPosition()})}function w(e){return q.default.fetchTargets(G.baseURL,G.socitalUserID,e).then(function(e){return window.Shopify?new V.default(G,window.location.origin,G.baseURL).checkForShopifyCartTargets(e):e})}function _(e){var t=e.htmlElement,r=e.userID,n=e.dev,i=e.baseURL,o=e.logger,a=e.campaigns,s=void 0===a?[{}]:a,l=e.env,u=e.tracker,c=e.logWebHookURL,d=e.logLevel,f=e.browserID;return G.htmlElement=t,G.socitalUserID=r,G.dev=n,G.baseURL=i,G.campaigns=s,G.env=l,G.tracker=u,G.logger=o.child({childName:"Main"}),G.logOptions={logWebHookURL:c,logLevel:d},G.browserID=f,G}function O(){var e=function(e){for(var t={},r=("?"===e[0]?e.substr(1):e).split("&"),n=0;n<r.length;n++){var i=r[n].split("="),o=D(i,2),a=o[0],s=o[1];a&&s&&(t[decodeURIComponent(a)]=decodeURIComponent(s||""))}return t}(window.location.search),t=Object.keys(e).find(function(e){return"socital-webview-state"===e});if(t){var r=JSON.parse(e[t]),n=r.id,i=r.success,o=r.socialToken,a=r.socialUser;E.default.set({name:"SocitalPending:"+n,value:JSON.stringify({success:i,socialToken:o,socialUser:a}),expiresInDays:7}),delete e[t],window.history.replaceState(null,"","?"+function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}(e)+location.hash)}}Object.defineProperty(t,"__esModule",{value:!0});var D=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=r(75),I=n(k),T=r(69),S=n(T),x=r(70),N=n(x),P=r(13),E=n(P),C=r(66),M=n(C),R=r(19),L=n(R),U=r(43),j=r(67),A=n(j),B=r(12),W=n(B),z=r(44),q=n(z),F=r(76),V=n(F),J=r(74),H=n(J),G={initialized:!1,campaignIDs:[],campaigns:[{}],iframes:[],pluginsRendered:[],targets:[],logger:{},popupSemaphore:new I.default};G.checkTargetingRule=i,G.setTrigger=o,G.doRender=a,G.init=s,G.setSocitalCookie=l,G.resizePlugin=u,G.openModal=c,G.closeIFrame=d,G.initialize=g,G.resizeAllPlugins=y,G.postInit=b,G.getCampaigns=h,G.preloadImages=p,G.preInit=m,G.getTargets=w,G.targetResolution=f,G.parseWebviewStateToCookie=O,t.default=_}).call(t,r(11))},,,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DomainNotAllowedError=function(e){function t(){n(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="DomainNotAllowedError",e.type="Operational",e.message="\n\nThe current URL loading the Socital script has not been added to the list of allowed domains.\nPlease check the Allowed Domains settings of your socital account.\n\nhttps://my.socital.com/account/settings\n",e}return o(t,e),t}(Error),t.InvalidUserOrSubError=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="InvalidUserOrSubError",r.type="Operational",r.message=e,r}return o(t,e),t}(Error),t.FetchTargetsError=function(e){function t(e){var r=e.status,o=e.statusText,a=e.type,s=e.body;n(this,t);var l=JSON.stringify({status:r,statusText:o,type:a,body:s}),u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.name="FetchTargetError",u.message="Could not fetch target\n"+l,u}return o(t,e),t}(Error),t.WrongUserIDError=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="WrongUserIDError",r.type="Operational",r.message="Socital script was not initialized with a correct userID. UserID was "+e,r}return o(t,e),t}(Error)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(68),c=n(u),d=r(13),f=n(d),h=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,logOptions:d}));if(f.constructor===t)throw new Error("Class `Iframe` must not be instantiated directly.");return f._plugin=r,f._id=r.pluginID,f._DOMNode=null,f._content=f.layoutCompile(),f.tracker=c,f.logger=s.child({pluginID:f._id}),f.sessionPeriodInDays=.021,f._state="new",f}return a(t,e),l(t,[{key:"init",value:function(){this._DOMNode=document.createElement("iframe"),this._DOMNode.src="about:blank",this._DOMNode.id=this._id,this._state="initialized"}},{key:"append",value:function(){this.hasBeenInitialized()?(document.body.appendChild(this._DOMNode),this._state="appended"):this.logger.warn("["+this._id+"] Iframe has to be initialized first in order to append it to the body.")}},{key:"style",value:function(){this.hasBeenInitialized()?this._DOMNode.style.border="0px":this.logger.warn("["+this._id+"] Iframe has to be initialized first in order to style it.")}},{key:"render",value:function(){var e=this;return Promise.resolve().then(function(){return e._DOMNode.contentWindow.document.open(),e._DOMNode.contentWindow.document.write(e._content),e._DOMNode.contentWindow.document.close(),e._DOMNode.style.zIndex="16777270",e._state="rendered",e.tracker.disableTracking?Promise.resolve():e.trackRender()}).catch(function(){e._state="error"})}},{key:"hasBeenInitialized",value:function(){return"new"!==this._state&&"error"!==this._state}},{key:"check",value:function(){return this._state}},{key:"trackRender",value:function(){return null==this.tracker?Promise.resolve():this.tracker.campaignRender({campaign:this._plugin})}},{key:"trackSessionRender",value:function(){var e=this;return"true"===f.default.get({name:"socitalCampaignRendered"+this._id})?Promise.resolve():null==this.tracker?Promise.resolve():this.tracker.campaignRender({campaign:this._plugin}).then(function(t){return f.default.set({name:"socitalCampaignRendered"+e._id,value:!0,expiresInDays:e.sessionPeriodInDays})}).catch(function(){return Promise.resolve()})}},{key:"id",get:function(){return this._id}},{key:"DOMNode",get:function(){return this._DOMNode}},{key:"plugin",get:function(){return this._plugin},set:function(e){this._plugin=e}}]),t}(c.default),p=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f._container=document.getElementById("socital-"+f._id),f.logger=f.logger.child({childName:"IframeEmbedded"}),f}return a(t,e),l(t,[{key:"append",value:function(){if(null===this._container||void 0===this._container)return this.logger.warn("["+this._id+"] No container found for campaign, skipping"),void(this._state="error");this._container.appendChild(this._DOMNode),this._state="appended"}},{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="100%",this._DOMNode.style.position="static",this._DOMNode.style.height="100%",this._DOMNode.style.bottom="0",this._DOMNode.style.top="0",this._state="styled"}},{key:"layoutExtraHeadTags",value:function(){return"\n            <style>\n                html {\n                    overflow: hidden;\n                }\n                \n                .socital-main-embedded-wrapper {\n                    padding-top: 10px;\n                }\n                \n                .socital-login-buttons {\n                    text-align: center;\n                }\n            </style>\n        "}},{key:"trackRender",value:function(){return this._container?this.trackSessionRender():Promise.resolve()}}]),t}(h),g=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframePopup"}),f}return a(t,e),l(t,[{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="1px",this._DOMNode.style.minWidth="100%",this._DOMNode.style.maxWidth="100%",this._DOMNode.style.height="100%",this._DOMNode.style.minHeight="100%",this._DOMNode.style.position="fixed",this._DOMNode.style.top="0",this._DOMNode.style.left="0",this._DOMNode.style.zIndex="-16777271",this._state="styled"}},{key:"layoutExtraHeadTags",value:function(){return"\n            <style>\n                html {\n                    overflow: hidden;\n                }\n            </style>\n        "}},{key:"render",value:function(){var e=this;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this).then(function(){e._DOMNode.style.zIndex="16777271"})}}]),t}(h),v=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframeBar"}),f}return a(t,e),l(t,[{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="100%",this._DOMNode.style.position="fixed",this._DOMNode.style.left="0px",this._DOMNode.style.height="0px",this._state="styled","top"===this._plugin.style.position.y?this._DOMNode.style.top="0px":this._DOMNode.style.bottom="0px"}},{key:"trackRender",value:function(){return this.trackSessionRender()}}]),t}(h),y=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframeSlideUp"}),f}return a(t,e),l(t,[{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="1px",this._DOMNode.style.height="40px",this._DOMNode.style.minWidth="300px",this._DOMNode.style.maxWidth="300px",this._DOMNode.style.position="fixed",this._DOMNode.style.bottom="0",this._hasCTA=!0,window.innerWidth<=460?(this._DOMNode.style.left="0px",this._DOMNode.style.right="0px",this._DOMNode.style.marginRight="auto",this._DOMNode.style.marginLeft="auto"):"left"===this._plugin.style.position.x?this._DOMNode.style.left="10px":this._DOMNode.style.right="10px",this._state="styled"}},{key:"trackRender",value:function(){return this.trackSessionRender()}}]),t}(h),m=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframeScrollBox"}),f}return a(t,e),l(t,[{key:"style",value:function(){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="1px",this._DOMNode.style.position="fixed",this._DOMNode.style.bottom="10px","narrow"===this._plugin.widthType)this._DOMNode.style.minWidth="320px",this._DOMNode.style.maxWidth="320px";else switch(delete Object.assign({},this._plugin.identityProviders).email,Object.keys(this._plugin.identityProviders).length){case 1:""!==this._plugin.text.optOut?(this._DOMNode.style.minWidth="400px",this._DOMNode.style.maxWidth="400px"):(this._DOMNode.style.minWidth="300px",this._DOMNode.style.maxWidth="300px");break;case 2:this._DOMNode.style.minWidth="400px",this._DOMNode.style.maxWidth="400px";break;default:this._DOMNode.style.minWidth="570px",this._DOMNode.style.maxWidth="570px"}switch(this._plugin.template){case"imageLeft":this._DOMNode.style.minWidth=+this._DOMNode.style.minWidth.replace("px","")+250+"px",this._DOMNode.style.maxWidth=+this._DOMNode.style.maxWidth.replace("px","")+250+"px"}window.innerWidth<=460?(this._DOMNode.style.left="0px",this._DOMNode.style.right="0px",this._DOMNode.style.marginRight="auto",this._DOMNode.style.marginLeft="auto",this._DOMNode.style.minWidth=window.innerWidth-30+"px",this._DOMNode.style.maxWidth=window.innerWidth-30+"px"):"left"===this._plugin.style.position.x?this._DOMNode.style.left="10px":this._DOMNode.style.right="10px",this._state="styled"}}]),t}(h),b=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=JSON.parse(JSON.stringify(r));f.isSideTab="true";var h=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:f,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return h.logger=h.logger.child({childName:"IframeSideTabCTA"}),h._content=h.layoutCompile(),h}return a(t,e),l(t,[{key:"init",value:function(){this._DOMNode=document.createElement("iframe"),this._DOMNode.src="about:blank",this._DOMNode.id=this._id+"-side-tab",this._state="initialized"}},{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="1px",this._DOMNode.style.minWidth="250px",this._DOMNode.style.maxWidth="250px",this._DOMNode.style.transform="rotate(-90deg)",this._DOMNode.style.msTransform="rotate(-90deg)",this._DOMNode.style.WebkitTransform="rotate(-90deg)",this._DOMNode.style.height="40px",this._DOMNode.style.position="fixed",this._state="styled"}},{key:"setPosition",value:function(){var e=this._DOMNode.style.minWidth.replace("px","");switch("right"===this._plugin.style.position.x?(this._DOMNode.style.right=0,this._DOMNode.style.transformOrigin="100% 100%",this._DOMNode.style.msTransformOrigin="100% 100%",this._DOMNode.style.WebkitTransformOrigin="100% 100%"):(this._DOMNode.style.left=0,this._DOMNode.style.transformOrigin="0 0",this._DOMNode.style.msTransformOrigin="0 0",this._DOMNode.style.WebkitTransformOrigin="0 0"),this._plugin.style.position.y){case"top":"right"===this._plugin.style.position.x?this._DOMNode.style.bottom="calc(75% + "+e/2+"px)":this._DOMNode.style.top="calc(25% + "+e/2+"px)";break;case"center":"right"===this._plugin.style.position.x?this._DOMNode.style.bottom="calc(50% + "+e/2+"px)":this._DOMNode.style.top="calc(50% + "+e/2+"px)";break;case"bottom":"right"===this._plugin.style.position.x?this._DOMNode.style.bottom="calc(25% + "+e/2+"px)":this._DOMNode.style.top="calc(75% + "+e/2+"px)"}(window.innerWidth<=460||window.innerHeight<=460)&&(this._DOMNode.style.bottom="right"===this._plugin.style.position.x?"calc(50% + "+e/2+"px)":"calc(50% - "+e/2+"px)"),this._state="positioned"}},{key:"pluginIsSideTab",get:function(){return this._plugin.isSideTab}}]),t}(h),w=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframeSideTabModal"}),f._content=f.layoutCompile(),f}return a(t,e),l(t,[{key:"style",value:function(){if(this._DOMNode.style.border="0px",this._DOMNode.style.visibility="hidden",this._DOMNode.style.width="1px",this._DOMNode.style.position="fixed","narrow"===this._plugin.widthType)this._DOMNode.style.minWidth="300px",this._DOMNode.style.maxWidth="300px";else{var e=Object.assign({},this._plugin.identityProviders);switch(delete e.email,Object.keys(e).length){case 1:""!==this._plugin.text.optOut?(this._DOMNode.style.minWidth="400px",this._DOMNode.style.maxWidth="400px"):(this._DOMNode.style.minWidth="320px",this._DOMNode.style.maxWidth="320px");break;case 2:this._DOMNode.style.minWidth="400px",this._DOMNode.style.maxWidth="400px";break;default:this._DOMNode.style.minWidth="570px",this._DOMNode.style.maxWidth="570px"}}switch(this._plugin.template){case"imageLeft":this._DOMNode.style.minWidth=+this._DOMNode.style.minWidth.replace("px","")+310+"px",this._DOMNode.style.maxWidth=+this._DOMNode.style.maxWidth.replace("px","")+310+"px"}window.innerWidth<this._DOMNode.style.minWidth.replace("px","")&&(this._DOMNode.style.minWidth="90%",this._DOMNode.style.maxWidth="90%"),this._state="styled"}},{key:"setPosition",value:function(){switch("right"===this._plugin.style.position.x?this._DOMNode.style.right="12.5px":this._DOMNode.style.left="12.5px",this._plugin.style.position.y){case"top":this._DOMNode.style.bottom="calc(75% - "+this._DOMNode.offsetHeight/2+"px)";break;case"center":this._DOMNode.style.bottom="calc(50% - "+this._DOMNode.offsetHeight/2+"px)";break;case"bottom":this._DOMNode.style.bottom="calc(25% - "+this._DOMNode.offsetHeight/2+"px)"}window.innerWidth<=460&&"90%"!==this._DOMNode.style.minWidth?(this._DOMNode.style.bottom="calc(50% - "+this._DOMNode.offsetHeight/2+"px)",this._DOMNode.style.rigth="",this._DOMNode.style.left="50%",this._DOMNode.style.marginLeft="-"+this._DOMNode.style.minWidth.replace("px","")/2+"px"):"90%"===this._DOMNode.style.minWidth&&(this._DOMNode.style.bottom="calc(50% - "+this._DOMNode.offsetHeight/2+"px)",this._DOMNode.style.right="",this._DOMNode.style.left="5%"),window.getComputedStyle(this._DOMNode,null).top.replace("px","")<0&&(this._DOMNode.style.top="15px"),this._state="positioned"}},{key:"trackRender",value:function(){return this.trackSessionRender()}},{key:"open",value:function(){document.getElementById(this._plugin.pluginID).style.visibility="visible"}},{key:"pluginIsSideTab",get:function(){return this._plugin.isSideTab}}]),t}(m),_=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframePopupButtonModal"}),f}return a(t,e),l(t,[{key:"hide",value:function(){this._DOMNode.style.display="none"}},{key:"trackRender",value:function(){return this.trackSessionRender()}},{key:"open",value:function(){this._DOMNode.style.zIndex=16777271,this._DOMNode.style.display="block"}}]),t}(g),O=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions,f=e.iframePopupButtonModal;i(this,t);var h=JSON.parse(JSON.stringify(r));h.isPopupButton="true";var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:h,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return p.logger=p.logger.child({childName:"IframePopupButtonCTA"}),p._content=p.layoutCompile(),p._container=document.getElementById("socital-"+p._id),p._iframePopupButtonModal=f,p}return a(t,e),l(t,[{key:"init",value:function(){this._DOMNode=document.createElement("iframe"),this._DOMNode.src="about:blank",this._DOMNode.id=this._id+"-popup-button",this._state="initialized"}},{key:"render",value:function(){return this._iframePopupButtonModal.hide(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"trackRender",value:function(){return Promise.resolve()}}]),t}(p),D=function(e){function t(e){var r=e.plugin,n=e.browserID,a=e.baseURL,s=e.logger,l=e.envData,u=e.clientID,c=e.tracker,d=e.logOptions;i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugin:r,browserID:n,baseURL:a,logger:s,envData:l,clientID:u,tracker:c,logOptions:d}));return f.logger=f.logger.child({childName:"IframeNone"}),f}return a(t,e),l(t,[{key:"style",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"style",this).call(this),this._DOMNode.style.width="0px",this._DOMNode.style.minWidth="0px",this._DOMNode.style.maxWidth="0px",this._DOMNode.style.height="0px",this._DOMNode.style.minHeight="0px",this._DOMNode.style.position="fixed",this._DOMNode.style.top="-100px",this._DOMNode.style.left="-100px",this._DOMNode.style.zIndex="-16777271",this._DOMNode.style.display="block",this._DOMNode.style.opacity="0",this._state="styled"}},{key:"render",value:function(){if(this.hasBeenInitialized()){if("rendered"===this._state)return;return this._DOMNode.contentWindow.document.open(),this._DOMNode.contentWindow.document.write(this._content),this._DOMNode.contentWindow.document.close(),this._state="rendered",Promise.resolve()}this.logger.warn("["+this._id+"] Iframe has to be initialized first in order to render the campaign")}},{key:"trackRender",value:function(){return Promise.resolve()}},{key:"layoutExtraHeadTags",value:function(){}}]),t}(h);t.default={IframeEmbedded:p,IframePopup:g,IframePopupButtonCTA:O,IframePopupButtonModal:_,IframeScrollBox:m,IframeSideTabCTA:b,IframeSideTabModal:w,IframeSlideUp:y,IframeNone:D,IframeBar:v}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._images=t,this._iframeElement=document.createElement("IFRAME"),this._iframeElement.id="socital-cache",this._iframeElement.src="about:blank",this._iframeElement.style.display="none",this._state="new"}return i(e,[{key:"prepareCaching",value:function(){document.body.appendChild(this._iframeElement),this._iframeElement.contentWindow.document.open(),this._iframeElement.contentWindow.document.write("<html><head></head><body></body></html>"),this._iframeElement.contentWindow.document.close(),this._state="ready"}},{key:"cache",value:function(){var e=this;this._images.forEach(function(t){var r=document.createElement("IMG");r.src=t,e._iframeElement.contentWindow.document.body.appendChild(r)}),this._state="cached"}},{key:"images",get:function(){return this._images}},{key:"iframeElement",get:function(){return this._iframeElement}},{key:"state",get:function(){return this._state}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(29),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=null,l=function(){function e(t){var r=t.plugin,i=t.browserID,o=t.baseURL,a=t.logger,l=t.envData,u=t.clientID,c=t.tracker,d=t.logOptions;n(this,e),s||(s=this),this.plugin=r,this.browserID=i,this.baseURL=o,this.logger=a.child({component:"PluginLayout"}),this.envData=l,this.clientID=u,this.logOptions=d,this.tracker=c}return i(e,[{key:"layoutExtraHeadTags",value:function(){}},{key:"layoutFonts",value:function(){var e=this.plugin.style.font;return Array.isArray(this.plugin.redirectButtons)&&this.plugin.redirectButtons.forEach(function(t,r){e["redirect-button-"+r]={value:t.style.font}}),'<link href="'+a.default.getLink(e)+'"\n                      rel="stylesheet"\n                      id="data-socital-fonts"\n                >'}},{key:"layoutHead",value:function(){var e=null===this.layoutExtraHeadTags()||void 0===this.layoutExtraHeadTags()?"":this.layoutExtraHeadTags();return'\n            <head>\n                <meta name="viewport" content="width=device-width, initial-scale=1">\n                <meta charset="utf-8">\n                \n                '+this.layoutFonts()+'\n                \n                <link rel="stylesheet" \n                      type="text/css"\n                      href="'+this.baseURL+'/static/v1/css/fonts.css"\n                >                    \n                <link rel="stylesheet" \n                      type="text/css"\n                      href="'+this.baseURL+"/static/v1/css/"+this.getCssFilename()+'"\n                >\n                \n                '+e+'\n                    \n                <style id="data-socital-style">'+this.plugin.style.customCSS+"</style>\n            </head>\n        "}},{key:"layoutBody",value:function(){return'\n            <body class="'+this.plugin.displayType+'" data-plugin-template="'+this.plugin.template+'" data-socital-plugin-type="'+this.plugin.type+'">\n                <script>\n                    window.pluginData = {\n                        plugin: "'+encodeURIComponent(JSON.stringify(this.plugin))+'",\n                        browserID: "'+this.browserID+'",\n                        baseURL:"'+this.baseURL+'",\n                        logLevel: "'+this.logOptions.logLevel+'",\n                        logWebHookURL: "'+this.logOptions.logWebHookURL+'",\n                        envData: "'+encodeURIComponent(JSON.stringify(this.envData))+'",\n                        clientID: "'+this.clientID+'"\n                    };\n                <\/script>\n                <script src="'+this.baseURL+'/static/v1/plugin.js"><\/script>\n            </body>\n        '}},{key:"layoutCompile",value:function(){return"\n            <html>\n                "+this.layoutHead()+"\n                "+this.layoutBody()+"\n            </html>\n        "}},{key:"getCssFilename",value:function(){switch(this.plugin.template){case"template1":return"template1.css";case"imageLeft":return"imageLeft.css";case"bar-gradientBlue":return"gradientBlue-bar.css";case"bar-countdown":return"countdown-bar.css";case"fullPage-technology":return"technology.css";case"fullPage-mothersDay":return"mothersDay-fullPage.css";case"sideImage-mothersDay":return"mothersDay-sideImage.css";case"bw-mothersDay":return"mothersDay-bw.css";case"sideImage-bw":return"bw-sideImage.css";case"sideImage-gentleman":return"gentleman-sideImage.css";case"sideImage-countdown":return"countdown-sideImage.css";case"square-fadeToBlue":return"square-fadeToBlue.css";case"sideImage-charcoal":return"charcoal-sideImage.css";case"square-solidGray":return"square-solidGray.css";case"sideImage-marguerite":return"marguerite-sideImage.css";case"sideImage-cherryBlossom":return"cherryBlossom-sideImage.css";case"sideImage-elegant":return"elegant-sideImage.css";case"sideImage-mineralGreen":return"mineralGreen-sideImage.css";case"square-plainImage":return"square-plainImage.css";case"square-autumnLeaf":return"square-autumnLeaf.css";case"square-denim":return"square-denim.css";case"square-sepia":return"square-sepia.css";case"square-twoButtons":return"square-twoButtons.css";case"square-threeButtons":return"square-threeButtons.css";case"square-rainyDay":return"square-rainyDay.css";case"sideImage-redWine":return"redWine-sideImage.css";case"sideImage-oliveGreen":return"oliveGreen-sideImage.css";case"square-fadeToBlack":return"square-fadeToBlack.css";case"square-pumpkinSpice":return"square-pumpkinSpice.css";case"sideImage-appleBlossom":return"appleBlossom-sideImage.css";case"sideImage-frostGray":return"grayFrost-sideImage.css";default:return"plugin.css"}}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserDefinedCookie=t.TargetPastInteractionFactory=t.TargetCartValue=t.TargetPagesVisited=t.TargetAuthorizedUsers=t.TargetReferrerDomain=t.TargetDesktopDevice=t.TargetMobileDevice=t.TargetReturningVisitors=t.TargetNewVisitors=t.TargetQueryParameters=t.TargetUrlContains=t.TargetUrl=t.Target=void 0;var l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(113),d=n(c),f=r(18),h=n(f),p=r(13),g=n(p),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.values,n=void 0===r?[]:r;s(this,e),this.values=n}return u(e,[{key:"check",value:function(){return this.values.length>0}}]),e}(),y=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){var e=this;return!!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this)&&this.values.some(function(t){try{var r=e._appendTraillingIfNotExists(window.location.pathname);if(t.indexOf("/*")>=0){var n=e._appendTraillingIfNotExists(t.split("/*")[0]);return r.startsWith(n)}return t=e._appendTraillingIfNotExists(t),r===t}catch(e){return console.log(e),!1}})}},{key:"_appendTraillingIfNotExists",value:function(e){if("string"!=typeof e)throw new Error("Term is not a string");return"/"!==e[e.length>0?e.length-1:0]&&(e+="/"),e}}]),t}(v),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.values,n=void 0===r?[]:r;s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{i.values=n,i.urlParams=new d.default(window.location.href,!0).query}catch(e){i.values=[{}],i.urlParams={}}return i}return a(t,e),u(t,[{key:"_equals",value:function(e,t){var r=this.urlParams[t];return e.some(function(e){return r===decodeURIComponent(e)})}},{key:"_contains",value:function(e,t){var r=this.urlParams[t];return!!r&&e.some(function(e){return r.includes(decodeURIComponent(e))})}},{key:"_exists",value:function(e){return null!==this.urlParams[e]&&void 0!==this.urlParams[e]}},{key:"check",value:function(){var e=this;return!!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this)&&this.values.every(function(t){switch(t.condition){case"equals":return e._equals(t.values,t.parameter);case"notEqual":return!e._equals(t.values,t.parameter);case"contains":return e._contains(t.values,t.parameter);case"notContain":return!e._contains(t.values,t.parameter);case"exists":return e._exists(t.parameter);case"notExist":return!e._exists(t.parameter);default:return!0}})}}]),t}(v),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.values,n=void 0===r?[]:r,i=e.cartValue,a=void 0===i?0:i;s(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{l.values=n,l.cartValue=l._formatShopifyCurrencyValue(a)}catch(e){l.values=[{}],l.cartValue=0}return l}return a(t,e),u(t,[{key:"_formatShopifyCurrencyValue",value:function(e){var t=e.toString();return 1===t.length?parseFloat("0.0"+t):parseFloat(t.substr(0,t.length-2)+"."+t.substr(t.length-2))}},{key:"_greaterThan",value:function(e){return this.cartValue>e[0]}},{key:"_lessThan",value:function(e){return this.cartValue<e[0]}},{key:"_greaterOrEqual",value:function(e){return this.cartValue>=e[0]}},{key:"_lessOrEqual",value:function(e){return this.cartValue<=e[0]}},{key:"_between",value:function(e){return e[0]<=this.cartValue&&e[1]>=this.cartValue}},{key:"_equals",value:function(e){return e[0]===this.cartValue}},{key:"check",value:function(){var e=this;return!!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this)&&this.values.every(function(t){switch(t.condition){case"equals":return e._equals(t.values);case"between":return e._between(t.values);case"greaterThan":return e._greaterThan(t.values);case"lessThan":return e._lessThan(t.values);case"greaterOrEqual":return e._greaterOrEqual(t.values);case"lessOrEqual":return e._lessOrEqual(t.values);default:return!0}})}}]),t}(v),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.values,n=void 0===r?[]:r;s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{i.values=n,window.location.pathname.trim,i.pathname=decodeURIComponent(window.location.pathname.replace(/\/$/,""))}catch(e){i.values=[],i.pathname=""}return i}return a(t,e),u(t,[{key:"check",value:function(){var e=this;return!!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this)&&this.values.every(function(t){switch(t.condition){case"contain":return e._contain(t.values);case"notContain":return!e._contain(t.values);case"startWith":return e._startWith(t.values);case"notStartWith":return!e._startWith(t.values);case"endWith":return e._endWith(t.values);case"notEndWith":return!e._endWith(t.values);default:return!0}})}},{key:"_contain",value:function(e){var t=this;return e.some(function(e){return t.pathname.indexOf(e)>-1})}},{key:"_startWith",value:function(e){var t=this;return e.some(function(e){return 0===t.pathname.indexOf("/"+e)})}},{key:"_endWith",value:function(e){var t=this;return e.some(function(e){var r=t.pathname.indexOf(e);return r>=0&&r===t.pathname.length-e.length})}}]),t}(v),_=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){return""===g.default.get({name:"socital"})}}]),t}(v),O=function(e){function t(e){var r=e.pluginID,n=void 0===r?{}:r,i=e.values,a=void 0===i?[]:i;s(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.pluginID=n,l.values=a,l}return a(t,e),u(t,[{key:"check",value:function(){if(0===this.values.length)return!1;var e=g.default.get({name:"SocitalPagesVisited-"+this.pluginID});return""===e?g.default.set({name:"SocitalPagesVisited-"+this.pluginID,value:1,expiresInDays:.02}):g.default.set({name:"SocitalPagesVisited-"+this.pluginID,value:parseInt(e)+1,expiresInDays:.02}),g.default.get({name:"SocitalPagesVisited-"+this.pluginID})>=this.values[0]}}]),t}(v),D=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){var e=g.default.get({name:"socital"});if(e){var t=Number(e);if((new Date).getTime()-t>36e5)return!0}return!1}}]),t}(v),k=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){return navigator.userAgent.toUpperCase().includes("MOBILE")}}]),t}(v),I=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){return!navigator.userAgent.toUpperCase().includes("MOBILE")}}]),t}(v),T=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){if(!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this))return!1;var e=document.referrer,r=/^(?:https?:\/\/)?(?:[^@/\n]+@)?(?:www\.)?([^:/\n]+)(?:(:\d*)?)/,n=r.exec(e);return!(null===n||n.length<2)&&this.values.some(function(e){var t=r.exec(e);return!(null===t||n.length<2)&&n[1].toLowerCase()===t[1].toLowerCase()})}}]),t}(v),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.pluginID,n=e.values,i=void 0===n?[]:n;s(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._values=i,a.pluginID=r,a}return a(t,e),u(t,[{key:"findAndReplaceWildcard",value:function(){var e=this;this.values.forEach(function(t){var r=function(e){return"__this"===e},n=t.anyOf.findIndex(function(e){return r(e)}),i=t.every.findIndex(function(e){return r(e)});n>-1&&(t.anyOf[n]=e.pluginID),i>-1&&(t.every[i]=e.pluginID)})}},{key:"check",value:function(){this.findAndReplaceWildcard();var e=""!==g.default.get({name:"SocitalConverted:"+this.pluginID})?"SocitalConverted":"SocitalLoggedIn";return this.values.some(function(t){return t.anyOf.length>0&&t.anyOf.some(function(t){return""!==g.default.get({name:e+":"+t})})||t.every.length>0&&t.every.every(function(t){return""!==g.default.get({name:e+":"+t})})})}},{key:"values",get:function(){return this._values},set:function(e){this._values=e}}]),t}(v),x=(function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.pluginID,n=e.values,i=void 0===n?[]:n;s(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._values=i,a.pluginID=r,a}a(t,e),u(t,[{key:"check",value:function(){return this.values.some(function(e){return e.anyOf.length>0&&e.anyOf.some(function(e){return""!==g.default.get({name:"socitalPlugin"+e})})||e.every.length>0&&e.every.every(function(e){return""!==g.default.get({name:"socitalPlugin"+e})})})}},{key:"values",get:function(){return this._values},set:function(e){this._values=e}}])}(v),function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}a(t,e),u(t,[{key:"check",value:function(){return this.values.some(function(e){return 0===e.anyOf.length&&""===g.default.get({name:"socital"})||0===e.every.length&&""===g.default.get({name:"socital"})})}}])}(v),function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){if(this.values.includes("*")){if(""!==g.default.match({regex:/^SocitalConverted:[a-f\d]{24}$/})||""!==g.default.match({regex:/^SocitalLoggedIn:[a-f\d]{24}$/}))return!0;if(""===g.default.match({regex:/^SocitalConverted:[a-f\d]{24}$/})&&""===g.default.match({regex:/^SocitalLoggedIn:[a-f\d]{24}$/}))return!1}return this.values.some(function(e){return""!==g.default.get({name:"SocitalConverted:"+e})||""!==g.default.get({name:"SocitalLoggedIn:"+e})||(""!==g.default.get({name:"SocitalConverted:"+e})||""!==g.default.get({name:"SocitalLoggedIn:"+e}))&&void 0})}}]),t}(v)),N=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){if(this.values.includes("*")){if(""!==g.default.match({regex:/^SocitalConverted:[a-f\d]{24}$/})||""!==g.default.match({regex:/^SocitalLoggedIn:[a-f\d]{24}$/}))return!1;if(""===g.default.match({regex:/^SocitalConverted:[a-f\d]{24}$/})&&""===g.default.match({regex:/^SocitalLoggedIn:[a-f\d]{24}$/}))return!0}return this.values.some(function(e){return""===g.default.get({name:"SocitalConverted:"+e})&&""===g.default.get({name:"SocitalLoggedIn:"+e})&&(""===g.default.get({name:"SocitalConverted:"+e})&&""===g.default.get({name:"SocitalLoggedIn:"+e})||void 0)})}}]),t}(v),P=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){return this.values.some(function(e){return""!==g.default.get({name:"socitalPlugin"+e})})}}]),t}(v),E=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"check",value:function(){return this.values.some(function(e){return""===g.default.get({name:"socitalPlugin"+e})})}}]),t}(v),C=function(e){function t(){var e,r,n,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=a.interaction;s(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));switch(""+l.condition+l.name){case"hasLoggedIn":return e=new x({values:l.values}),o(u,e);case"hasNotLoggedIn":return r=new N({values:l.values}),o(u,r);case"hasSeen":return n=new P({values:l.values}),o(u,n);case"hasNotSeen":return i=new E({values:l.values}),o(u,i)}return u}return a(t,e),t}(v),M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.values,n=void 0===r?[]:r;s(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{i.values=n}catch(e){i.values=[{}]}return i}return a(t,e),u(t,[{key:"_between",value:function(e,t){var r=parseFloat(t),n=Math.min.apply(Math,i(e)),o=Math.max.apply(Math,i(e));return n<=r&&r<=o}},{key:"check",value:function(){var e=this;return!!l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"check",this).call(this)&&this.values.every(function(t){var r=t.condition,n=t.operator,i=t.parameter,o=t.values,a=document.cookie.split("; ").find(function(e){return e.startsWith(i+"=")}),s=h.default.get({name:i});switch(r){case"exists":return void 0!==a;case"notExist":return void 0===a;case"isNumber":if(""!==s&&Number.isNaN(Number.parseFloat(s)))return!1;break;case"isText":break;default:return!1}switch(n){case"equals":return"isNumber"===r?o.some(function(e){return parseFloat(s)===parseFloat(e)}):o.some(function(e){return s===e});case"notEqual":return o.every(function(e){return s!==e});case"contains":return o.some(function(e){return s.includes(e)});case"notContain":return o.every(function(e){return!s.includes(e)});case"lessThan":return o.some(function(e){return parseFloat(s)<parseFloat(e)});case"greaterThan":return o.some(function(e){return parseFloat(s)>parseFloat(e)});case"lessOrEqual":return o.some(function(e){return parseFloat(s)<=parseFloat(e)});case"greaterOrEqual":return o.some(function(e){return parseFloat(s)>=parseFloat(e)});case"between":return e._between(o,s);case"isSet":return""!==s;case"notSet":return""===s;default:return!1}})}}]),t}(v);t.default={Target:v,TargetUrl:y,TargetUrlContains:w,TargetQueryParameters:m,TargetNewVisitors:_,TargetReturningVisitors:D,TargetMobileDevice:k,TargetDesktopDevice:I,TargetReferrerDomain:T,TargetAuthorizedUsers:S,TargetPagesVisited:O,TargetCartValue:b,TargetPastInteractionFactory:C,UserDefinedCookie:M},t.Target=v,t.TargetUrl=y,t.TargetUrlContains=w,t.TargetQueryParameters=m,t.TargetNewVisitors=_,t.TargetReturningVisitors=D,t.TargetMobileDevice=k,t.TargetDesktopDevice=I,t.TargetReferrerDomain=T,t.TargetAuthorizedUsers=S,t.TargetPagesVisited=O,t.TargetCartValue=b,t.TargetPastInteractionFactory=C,t.UserDefinedCookie=M},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerManual=t.TriggerScroll=t.TriggerExit=t.TriggerDelay=t.Trigger=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(12),l=r(43),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=void 0===r?0:r;if(o(this,e),this.constructor===e)throw new TypeError("Class `Trigger` must not be instantiated directly.");if(void 0===this.init)throw new TypeError("Method init must be overridden.");this.value=n,this.state="new"}return a(e,[{key:"check",value:function(){return this.state}}]),e}(),c=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(){var e=this;return this.state="running",new Promise(function(t,r){return setTimeout(function(){e.state="completed",t()},1e3*e.value)})}},{key:"toString",value:function(){return"trigger delay for "+this.value+"s"}}]),t}(u),d=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(){this.state="running";var e=null;"function"==typeof window.onscroll&&(e=window.onscroll);var r=this.value,n=null;return new Promise(function(i,o){window.onscroll=function(o){var a=this;e&&e.call(window,o),n&&clearTimeout(n),n=setTimeout(function(){t.getScrollPosition()>=r&&(window.onscroll=function(){e&&e.call(window,o)},a.state="completed",i())},150)}})}},{key:"toString",value:function(){return"trigger scroll when user has scroller "+this.value+"% of the page"}}],[{key:"getScrollPosition",value:function(){var e=document.documentElement,t=document.body;return Math.round((e.scrollTop||t.scrollTop)/((e.scrollHeight||t.scrollHeight)-e.clientHeight)*100)}}]),t}(u),f=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(){var e=this;return this.lastScrollY=0,new Promise(function(t,r){if("ontouchstart"in window){var n=function(){"completed"!==e.state?(e.state="running",e.lastScrollY=window.scrollY):(0,s.unbindEvent)(window,"touchstart",o)},i=function(){Math.round(window.scrollY/window.innerHeight*100)>=80&&!e.scrollThresholdReached&&(e.scrollThresholdReached=!0);var r=window.scrollY-e.lastScrollY;if(e.scrollThresholdReached&&r<=-80&&(e.state="completed",t()),e.lastScrollY=window.scrollY,"completed"===e.state)return!0},o=n.bind(e),a=i.bind(e);(0,s.bindEvent)(window,"touchstart",o),new l.ScrollObserver(a).init()}else{var u=document.getElementsByTagName("html")[0],c=function(r){e.state="running",(window.innerWidth<r.clientX||r.clientX<0||r.clientY<0||window.innerHeight<r.clientY)&&((0,s.unbindEvent)(u,"mouseleave",d),e.state="completed",t())},d=c.bind(e);(0,s.bindEvent)(u,"mouseleave",d)}e.state="running"})}},{key:"toString",value:function(){return"trigger exit intent"}}]),t}(u),h=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"init",value:function(){var e=this;return new Promise(function(t,r){e.state="completed",t()})}},{key:"toString",value:function(){return"trigger manual (user needs to call the campaign to render)"}}]),t}(u);t.default={Trigger:u,TriggerDelay:c,TriggerExit:f,TriggerScroll:d,TriggerManual:h},t.Trigger=u,t.TriggerDelay=c,t.TriggerExit=f,t.TriggerScroll=d,t.TriggerManual=h},,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(42),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"resize"));return r.delay=200,r.action=e,r}return o(t,e),t}(s.default);t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(42),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"scroll"));return r.delay=50,r.action=e,r}return o(t,e),t}(s.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(47),l=n(s),u=r(13),c=n(u),d=r(44),f=n(d),h=r(12),p=function(){function e(t){o(this,e),this.SOC=t,this.handleAddToCart=this.handleAddToCart.bind(this),this.handleOrderCreated=this.handleOrderCreated.bind(this)}return a(e,[{key:"initiateListeners",value:function(){window.addEventListener("socitalAddToCart",this.handleAddToCart),window.addEventListener("socitalOrderCreated",this.handleOrderCreated)}},{key:"initiateCustomListeners",value:function(e){e&&(this.SOC.logger.debug("Tracking settings to be applied"),this._handleAddToCartSettings(e.addToCart),this._handleOrderCreatedSettings(e.orderCreated))}},{key:"handleAddToCart",value:function(e){var t=this,r={body:JSON.stringify({leadIDs:this.leadIDsFromCookies(),userID:this.SOC.socitalUserID}),headers:{"X-SOCITAL-DOMAIN":this.SOC.env.url.current,"Content-Type":"application/json"},method:"POST"};return(0,l.default)(this.SOC.baseURL+"/api/v1/cart/item",r).catch(function(e){return t.SOC.logger.error({error:"Error while saving add to cart event - "+e}),Promise.resolve()})}},{key:"handleOrderCreated",value:function(e){var t=null!=e.detail&&e.detail.hasOwnProperty("orderID")?e.detail.orderID:null;this.SOC.logger.info("["+t+"] Capturing order event "+JSON.stringify(e.detail));var r=this.getOrderDetails(e.detail);return this.saveOrder(r)}},{key:"saveOrder",value:function(e){var t=this;if(e.error)return this.SOC.logger.error(e.error),Promise.resolve();var r={order:e,campaigns:this.getCampaignsFromCookies(),leadIDs:this.leadIDsFromCookies(),userID:this.SOC.socitalUserID};return this.SOC.logger.info("["+e.orderID+"] Saving order event "+JSON.stringify(r)),f.default.saveOrder(this.SOC.baseURL,r,this.SOC.env.url.current).catch(function(e){return t.SOC.logger.error({error:"Error while saving order - "+e}),Promise.resolve()})}},{key:"getOrderDetails",value:function(e){var t=e.totalPrice,r=e.currency,n=e.customerID,i=e.orderID,o=e.createdAt,a=void 0===o?new Date(Date.now()):o,s={price:parseFloat(t),currency:r,customerID:n,orderID:i,createdAt:a},l=["price","currency"].filter(function(e){return void 0===s[e]});return Number.isNaN(s.price)&&l.push("price"),l.length>0?{error:"Error while fetching order details from event.details. The following properties were undefined - ["+l+"]."}:s}},{key:"getCampaignsFromCookies",value:function(){return[].concat(i(c.default.matchAll({regex:/^SocitalLoggedIn:[a-f\d]{24}$/})),i(c.default.matchAll({regex:/^SocitalConverted:[a-f\d]{24}$/}))).map(function(e){return{campaignID:e.name.split(":")[1],timestamp:e.value.split(":")[1]}})}},{key:"leadIDsFromCookies",value:function(){return[].concat(i(c.default.matchAll({regex:/^SocitalLoggedIn:[a-f\d]{24}$/}))).map(function(e){return e.value.split(":")[0]})}},{key:"customHandlerEvaluation",value:function(e){try{return new Function(e)()}catch(e){return this.SOC.logger.error({e:e},"Error while evaluating custom snipped for ecommerce events"),!1}}},{key:"_handleAddToCartSettings",value:function(e){var t=this;if(e.selector){var r=function(){if(!e.handler||t.customHandlerEvaluation(e.handler))return t.handleAddToCart(null)};this.SOC.logger.debug("AddToCart selector: ",e.selector),(0,h.addCustomEventListener)(e.selector,"click",r)}}},{key:"_handleOrderCreatedSettings",value:function(e){if(e.url&&location.pathname.includes(e.url)){this.SOC.logger.debug("OrderCreated url: ",e.url);var t={totalPrice:0,currency:"EUR",customerID:0,createdAt:new Date};return!e.handler||this.customHandlerEvaluation(e.handler)?this.handleOrderCreated({detail:t}):void 0}}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=null,a=function(){function e(){n(this,e),o||(o=this),this._isPopupOpen=!1,this._openedPopup={},this._queue=[]}return i(e,[{key:"lock",value:function(e){return"popup"!==e.displayType?"Not a popup":this._isPopupOpen&&this._openedPopup.pluginID!==e.pluginID?(this._queue.push(e),!1):(this._isPopupOpen=!0,this._openedPopup=e,!0)}},{key:"release",value:function(){this._isPopupOpen=!1,this._openedPopup={};var e=this._queue;return this._queue=[],e}},{key:"isPopupOpen",get:function(){return this._isPopupOpen}},{key:"queue",get:function(){return this._queue}},{key:"openedPopup",get:function(){return this._openedPopup}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(47),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,r,i){n(this,e),this.SOC=t,this.shopifyCartURL=r,this.baseURL=i}return i(e,[{key:"getShopifyCart",value:function(){var e=this;return(0,a.default)(this.shopifyCartURL+"/cart.js").then(function(e){return e.json()}).then(function(t){return e.SOC.shopifyCart=t,Promise.resolve()}).catch(function(t){return e.SOC.logger.error("Could not fetch Shopify Cart for URL "+e.shopifyCartURL+" - "+t),Promise.reject({error:"Could not fetch cart."})})}},{key:"checkForShopifyCartTargets",value:function(e){return e.plugins.length>0&&e.plugins.map(function(e){return e.targets}).map(function(e){return e.find(function(e){return"cartValue"===e.type})}).filter(Boolean).length>0?this.getShopifyCart().then(function(){return e}).catch(function(){return e}):Promise.resolve(e)}},{key:"trackOrder",value:function(e){if(!window.Shopify||!window.Shopify.checkout)return Promise.resolve();var t=window.Shopify.checkout,r=this.getOrderDetails(t);return e.saveOrder(r)}},{key:"getOrderDetails",value:function(e){var t={price:parseFloat(e.total_price),currency:e.presentment_currency?e.presentment_currency:e.currency,customerID:e.customer_id,orderID:e.order_id,createdAt:e.created_at},r=Object.keys(t).filter(function(e){return void 0===t[e]});return Number.isNaN(t.price)&&r.push("price"),r.length>0?{error:"Error while fetching order details from window.Shopify.checkout. The following properties were undefined - ["+r+"]."}:t}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.SOC=t,this.window=window,this.usedPlugins=[]}return i(e,[{key:"getPluginIndex",value:function(e){return this.SOC.campaigns.findIndex(function(t){return t.pluginID===e})}},{key:"triggerPluginProgrammatically",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=this.getPluginIndex(n),o="function"==typeof t[t.length-1]?t[t.length-1]:function(){};if(-1===i&&(this.SOC.logger.debug("You tried to activate plugin "+n+" but the plugin could not be found for the targeting rules that have been registered"),o(new Error("Bad plugin ID"))),this.usedPlugins.indexOf(n)>-1)return this.SOC.logger.warn("This plugin has been already triggered once"),o(new Error("This plugin has been already triggered once")),!1;if(this.window.addEventListener("message",function(e){try{switch(e.data.messageType){case"SocitalLoginPopupWindowClosed":var r=e.data.data;2!==t.length&&(r.forwardData=t[2]),r.success?(delete r.socialToken,o(null,r)):o(r,null)}}catch(e){this.SOC.logger.error({err:e})}}),2===t.length&&i>-1&&"popup"===this.SOC.campaigns[i].displayType)this.SOC.init(i),this.usedPlugins.push(n);else{if(!(4===t.length&&i>-1&&"none"===this.SOC.campaigns[i].displayType))return this.SOC.logger.warn("You have called the function with invalid arguments. \n            The function can be called with (pluginID, callback) arguments for popup plugins with manual displayType\n            and with (pluginID, provider, data, callback) arguments for plugins of type none"),!1;var a=document.getElementById(n),s=t[1],l=a.contentWindow.document.getElementsByClassName("socital-login-button "+s),u=l[0];null!=u?(u.click(),this.usedPlugins.push(n)):(this.SOC.logger.warn("Provider "+s+" not available for this plugin."),o(new Error("Bad provider or provider not available.")))}}}]),e}();t.default=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return decodeURIComponent(e.replace(/\+/g," "))}function i(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,i={};t=r.exec(e);i[n(t[1])]=n(t[2]));return i}function o(e,t){t=t||"";var r=[];"string"!=typeof t&&(t="?");for(var n in e)a.call(e,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.length?t+r.join("&"):""}var a=Object.prototype.hasOwnProperty;t.stringify=o,t.parse=i},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},,,function(e,t,r){"use strict";(function(t){function n(e){e=e||t.location||{};var r,n={},i=typeof e;if("blob:"===e.protocol)n=new a(unescape(e.pathname),{});else if("string"===i){n=new a(e,{});for(r in p)delete n[r]}else if("object"===i){for(r in e)r in p||(n[r]=e[r]);void 0===n.slashes&&(n.slashes=f.test(e.href))}return n}function i(e){var t=d.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function o(e,t){for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);var s,l,d,f,p,g,v=h.slice(),y=typeof t,m=this,b=0;for("object"!==y&&"string"!==y&&(r=t,t=null),r&&"function"!=typeof r&&(r=c.parse),t=n(t),l=i(e||""),s=!l.protocol&&!l.slashes,m.slashes=l.slashes||s&&t.slashes,m.protocol=l.protocol||t.protocol||"",e=l.rest,l.slashes||(v[2]=[/(.*)/,"pathname"]);b<v.length;b++)f=v[b],d=f[0],g=f[1],d!==d?m[g]=e:"string"==typeof d?~(p=e.indexOf(d))&&("number"==typeof f[2]?(m[g]=e.slice(0,p),e=e.slice(p+f[2])):(m[g]=e.slice(p),e=e.slice(0,p))):(p=d.exec(e))&&(m[g]=p[1],e=e.slice(0,p.index)),m[g]=m[g]||(s&&f[3]?t[g]||"":""),f[4]&&(m[g]=m[g].toLowerCase());r&&(m.query=r(m.query)),s&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=o(m.pathname,t.pathname)),u(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(f=m.auth.split(":"),m.username=f[0]||"",m.password=f[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}function s(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||c.parse)(t)),n[e]=t;break;case"port":n[e]=t,u(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":n.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:n[e]=t}for(var i=0;i<h.length;i++){var o=h[i];o[4]&&(n[o[1]]=n[o[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function l(e){e&&"function"==typeof e||(e=c.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(r.slashes?"//":"");return r.username&&(i+=r.username,r.password&&(i+=":"+r.password),i+="@"),i+=r.host+r.pathname,t="object"==typeof r.query?e(r.query):r.query,t&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}var u=r(110),c=r(109),d=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,f=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};a.prototype={set:s,toString:l},a.extractProtocol=i,a.location=n,a.qs=c,e.exports=a}).call(t,r(14))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r(58)}]);
//# sourceMappingURL=socital.js.map